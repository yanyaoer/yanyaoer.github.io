<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on yányào.com</title><link>https://xn--ynyo-2nad.com/posts/</link><description>Recent content in Posts on yányào.com</description><generator>Hugo</generator><language>en-US</language><lastBuildDate>Thu, 25 Jul 2024 14:52:12 +0800</lastBuildDate><atom:link href="https://xn--ynyo-2nad.com/posts/index.xml" rel="self" type="application/rss+xml"/><item><title>Pandoc generate pdf from markdown</title><link>https://xn--ynyo-2nad.com/posts/pandoc-md2pdf/</link><pubDate>Thu, 25 Jul 2024 14:52:12 +0800</pubDate><guid>https://xn--ynyo-2nad.com/posts/pandoc-md2pdf/</guid><description>&lt;h2 id="intro">Intro&lt;/h2>
&lt;p>始终不太习惯 word/wps 类工具编辑文本，再一次尝试用 &lt;code>pandoc&lt;/code> 来生成 pdf，算是初步搞明白一点玩法，本文略过 markdown 的部分主要记录 &lt;code>latex&lt;/code> 相关设定内容。&lt;/p>
&lt;ul>
&lt;li>&lt;code>wkhtmltopdf&lt;/code> 也是一个选项，但是转 HTML 再生成 pdf 就没啥挑战了额哈哈&lt;/li>
&lt;/ul>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;p>首先完整安装 latex 包&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ brew uninstall --cask basictex
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ brew install --cask mactex
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="latex-template">Latex template&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">title&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Your article title here&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">date&lt;/span>: &lt;span style="color:#e6db74">2023-02-20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">fontsize&lt;/span>: &lt;span style="color:#ae81ff">12pt&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># fc-list :lang=zh&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#mainfont: &amp;#34;PingFang SC&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">mainfont&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Sarasa Mono SC&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># monofont: &amp;#34;FantasqueSansM Nerd Font Mono&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">monofont&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Sarasa Mono SC&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 中文换行支持&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">lang&lt;/span>: &lt;span style="color:#ae81ff">zh-CN&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">geometry&lt;/span>: &lt;span style="color:#ae81ff">margin=2cm&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 设置双栏&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># classoption=twocolumn&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>在 markdown 文档的最前面加入以上 metadata 简化命令参数设定，实际效果等价于&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ pandoc --pdf-engine&lt;span style="color:#f92672">=&lt;/span>xelatex -f gfm -H head.latex &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -V geometry:&lt;span style="color:#e6db74">&amp;#34;top=2cm, bottom=2cm, left=2cm, right=2cm&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -V mainfont&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;PingFang SC&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> input.md -o output.pdf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># simplify&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ pandoc --pdf-engine&lt;span style="color:#f92672">=&lt;/span>xelatex -H head.tex -f gfm input.md -o output.pdf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-latex" data-lang="latex">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">% head.tex，使用文档内联的 header-includes 指令一直运行不成功，
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">% 替换为 command-line 的参数 `-V header-includes=&amp;#39;\pagenumbering{gobble}&amp;#39;`
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">\pagenumbering&lt;/span>{gobble}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="vim-plugin">Vim plugin&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-vim" data-lang="vim">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">command&lt;/span>! &lt;span style="color:#a6e22e">ToPDF&lt;/span> &lt;span style="color:#a6e22e">call&lt;/span> &lt;span style="color:#a6e22e">s&lt;/span>:&lt;span style="color:#a6e22e">md_to_pdf&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">function&lt;/span>! &lt;span style="color:#a6e22e">s&lt;/span>:&lt;span style="color:#a6e22e">md_to_pdf&lt;/span>() &lt;span style="color:#a6e22e">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> &amp;#34; check if pandoc is installed&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">executable&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;pandoc&amp;#39;&lt;/span>) != &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">echoerr&lt;/span> &lt;span style="color:#e6db74">&amp;#34;pandoc not found&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">endif&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> &lt;span style="color:#a6e22e">l&lt;/span>:&lt;span style="color:#a6e22e">md_path&lt;/span> = &lt;span style="color:#a6e22e">expand&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;%:p&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> &lt;span style="color:#a6e22e">l&lt;/span>:&lt;span style="color:#a6e22e">pdf_path&lt;/span> = &lt;span style="color:#a6e22e">fnamemodify&lt;/span>(&lt;span style="color:#a6e22e">l&lt;/span>:&lt;span style="color:#a6e22e">md_path&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;:r&amp;#34;&lt;/span>) .. &lt;span style="color:#e6db74">&amp;#34;.pdf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> &lt;span style="color:#a6e22e">l&lt;/span>:&lt;span style="color:#a6e22e">cmd&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;pandoc --pdf-engine=xelatex -f gfm &amp;#34;&lt;/span> .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> \ &lt;span style="color:#e6db74">&amp;#34;-H ~/.local/share/pandoc/head.tex &amp;#39;&amp;#34;&lt;/span> .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> \ &lt;span style="color:#a6e22e">l&lt;/span>:&lt;span style="color:#a6e22e">md_path&lt;/span> . &lt;span style="color:#e6db74">&amp;#34;&amp;#39; -o &amp;#39;&amp;#34;&lt;/span> . &lt;span style="color:#a6e22e">l&lt;/span>:&lt;span style="color:#a6e22e">pdf_path&lt;/span> . &lt;span style="color:#e6db74">&amp;#34;&amp;#39; &amp;amp;&amp;amp; ql &amp;#39;&amp;#34;&lt;/span> . &lt;span style="color:#a6e22e">l&lt;/span>:&lt;span style="color:#a6e22e">pdf_path&lt;/span> . &lt;span style="color:#e6db74">&amp;#34;&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> &amp;#34; echomsg l:cmd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> &lt;span style="color:#a6e22e">l&lt;/span>:&lt;span style="color:#a6e22e">id&lt;/span> = &lt;span style="color:#a6e22e">jobstart&lt;/span>(&lt;span style="color:#a6e22e">l&lt;/span>:&lt;span style="color:#a6e22e">cmd&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">l&lt;/span>:&lt;span style="color:#a6e22e">id&lt;/span> == &lt;span style="color:#ae81ff">0&lt;/span> || &lt;span style="color:#a6e22e">l&lt;/span>:&lt;span style="color:#a6e22e">id&lt;/span> == &lt;span style="color:#ae81ff">-1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">echoerr&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Error running command&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">endif&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">endfunction&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Flair-58 Espresso Maker</title><link>https://xn--ynyo-2nad.com/posts/flair-58/</link><pubDate>Tue, 08 Feb 2022 15:55:00 +0800</pubDate><guid>https://xn--ynyo-2nad.com/posts/flair-58/</guid><description>&lt;h2 id="flair-58">flair-58&lt;/h2>
&lt;p>&lt;a href="https://flairespresso.com/product/flair-58/">https://flairespresso.com/product/flair-58/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://xn--ynyo-2nad.com/flair-coffee.jpg" alt="">&lt;/p>
&lt;p>周末浪费了2天豆子，终于折腾出比较理想的设定&lt;/p>
&lt;ul>
&lt;li>预热：浅烘 = 3档，中烘 = 2档，深烘 = 1档&lt;/li>
&lt;li>磨豆：C40 调到 8 格(浅烘豆 +=1)&lt;/li>
&lt;/ul>
&lt;p>奶泡机没到位，先用娃的小奶锅煮 200ml Oatly 燕麦奶，稍热就好，没有打出泡沫也就无所谓拉花了&lt;br>
PlanB: 微波炉加热 + &lt;a href="https://www.ikea.cn/cn/zh/p/produkt-pu-luo-da-da-mo-qi-hei-se-70301165/">宜家 ¥9.9 手持奶泡器&lt;/a>&lt;/p>
&lt;p>我买的优化后版本默认配无底手柄 + 58mm 18g粉碗，而上半年批次的好像是 20g粉碗，底部没有凹弧线，然后分水网和冲煮头是一体的，每杯都得拆下来清理，现在只需要拆手柄洗洗粉碗和分水网就好，方便连续出杯(但是对于没有多个手柄和粉碗的初阶用户来说，重新填粉加水的操作并不连续 -.-)&lt;br>
群里有大佬&lt;a href="https://docs.google.com/document/d/1szvhjTE2F7lzhr38phggVUO50fkbddq0/edit?usp=sharing&amp;amp;ouid=115932911354635105266&amp;amp;rtpof=true&amp;amp;sd=true">改装了底座和支架的方案&lt;/a>，解决下压前倾问题和使用12cm+的秤&lt;/p>
&lt;p>而无底手柄安装还不太熟练，经常要弯腰低头去看小翅膀有没有卡到位，然后注水再安装压力表(顺便当预浸泡)，18g豆出 36g液体，如果粉磨得过细，下压会很费劲&lt;/p>
&lt;p>虽然目前 5-9bar 之间压的曲线还不太稳定，偶尔通道也不太顺滋到杯外，但是香浓的 crema 已然远超预期(其实很容易过萃，但是家属喝不出来😂)&lt;/p>
&lt;p>试了下用冰的屈臣氏做 coffee soda，难喝🤢&lt;/p>
&lt;p>好多想买的配件：拉花奶缸、粉锤、布粉器、鼠尾粉碗、粉饼垃圾盒&lt;/p>
&lt;p>&lt;strong>update: 2022-08-19 14:09:08&lt;/strong>&lt;/p>
&lt;p>买了新的拉花缸和称，但是懒到完全不想碰牛奶，only pure coffee and water&amp;hellip;&lt;/p>
&lt;p>早晨的冲煮开始逐渐暴躁，直接磨58g粉分3次装填、下压、出液到一个杯里，再加冰块分装成两份 long black 出门，少洗两次杯子动作也更流畅～大概15-20分钟完成&lt;/p></description></item><item><title>剁手好物推荐</title><link>https://xn--ynyo-2nad.com/posts/toy/</link><pubDate>Fri, 24 Sep 2021 22:28:00 +0800</pubDate><guid>https://xn--ynyo-2nad.com/posts/toy/</guid><description>&lt;ul>
&lt;li>Insta360 GO2 拇指运动相机&lt;/li>
&lt;li>巷贩小酒 - 东方甄选金酒&lt;/li>
&lt;li>Reebok royal techque 板鞋&lt;/li>
&lt;li>ALTRA Escalante 2.5 轻量零落差跑鞋&lt;/li>
&lt;li>SENNHEISER IE300 耳机&lt;/li>
&lt;li>PhD 能量棒&lt;/li>
&lt;/ul></description></item><item><title>Volvo v60</title><link>https://xn--ynyo-2nad.com/posts/volvo-v60/</link><pubDate>Wed, 30 Jun 2021 21:10:00 +0800</pubDate><guid>https://xn--ynyo-2nad.com/posts/volvo-v60/</guid><description>&lt;p>因为家庭新成员加入，所以买车的优先级提了上来。一开始考虑大尺寸6/7座suv，能装全家人短途出行，比如highlander, outlander, explorer, Pajero&amp;hellip;后来因为今年各种新款上市，到最终提车时间有点晚，再加上城市拥堵和停车问题，回归到最初的选项也是一直种草的旅行车Volvo v60&lt;/p>
&lt;p>中间还去看过Jaguar和Alfa Romeo，可惜后排空间有点小，对外型内饰非常满意，动力和操控也很可以，尤其Julie的前脸颜值太命中我了，一直对mx5这类笑脸无法抗拒…&lt;/p>
&lt;p>V60在4s店试驾的豪华版，刚开始还挺不适应转向手感和油门刹车的，感觉都很沉很重。比起来以前开过的各种小钢炮和家用轿车，沉着有余灵活不够，前期不熟悉的时候操作起来都得小心翼翼。&lt;/p>
&lt;p>最后订车选了致远焰影蓝运动款，因为厂家直销的关系也没讲价，就跟销售要了行车记录仪和儿童座椅。目前开两个月小一千公里的行程，大概总结些点吧&lt;/p>
&lt;ul>
&lt;li>外观线条比例，审美观因人而异，但是V60各处都在我的区间内&lt;/li>
&lt;li>nappa皮座椅舒适和支撑都很到位，前排有可调的腿拖和腰撑。对豪华版的实木装饰水晶档杆其实没啥需求，氛围灯也蛮简约，没有那么夜店风。可惜选配的交车时间太长，不然座椅通风、冬季包、米色内饰都想加&lt;/li>
&lt;li>后排空间坐两人还行，但是中间的地台太高，不适合长途5人出行&lt;/li>
&lt;li>后备箱就不用夸了，狗子的航空箱一直塞在里面，出去玩很方便，去宜家就把后座放平。6月份搬家就跑了两趟，上次搬家借老王的a3可拉了56趟&lt;/li>
&lt;li>48v电机+autohold，起步平顺没有纯燃油车型起步轰发动机那个颤抖&lt;/li>
&lt;li>低转油门动力响应略有延迟，升档不算很迅速，不过相比起golf，508要好很多&lt;/li>
&lt;li>油耗市区日常11升百公里，跑机场高速能到6.1左右，平时一个月加一次满箱油，推荐95号&lt;/li>
&lt;li>方向盘虚位明显，过弯会习惯性多打一些位置，转向比hatchback车型都要重许多。前脸两侧的存在感明显，低坐姿的时候会开得谨慎，反而不会觉得屁股有什么阻碍&lt;/li>
&lt;li>底盘确实在开过的车里算得上优秀，过弯和滤震都很扎实。静音实属一般，风噪胎噪在后排(或者车速超过100)尤其明显，所以也就不考虑顶上行李箱&lt;/li>
&lt;li>autopilot 模式在跑高速时非常愉悦，车道保持比我打方向顺滑多了，跟前车保持车距也很可靠，另外养成了并线前一定先打灯的习惯，否则车子会自己修正。能称为瑕疵的就是自动刹车不够线性，乘客会有明显的拉扯感甚至点头；拥堵路段还得切回手动模式，跟车距离在我这边太容易被加塞&lt;/li>
&lt;/ul></description></item><item><title>Self Host Maddy Mail Server</title><link>https://xn--ynyo-2nad.com/posts/self-host-maddy-mail-server/</link><pubDate>Tue, 01 Dec 2020 20:34:44 +0800</pubDate><guid>https://xn--ynyo-2nad.com/posts/self-host-maddy-mail-server/</guid><description>&lt;h2 id="maddy">maddy&lt;/h2>
&lt;blockquote>
&lt;p>Composable all-in-one mail server. &lt;a href="https://github.com/foxcpp/maddy">https://github.com/foxcpp/maddy&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>准备自建系列服务替换掉 google 全家桶，先试了传统的 Postfix, Dovecot, OpenDKIM, OpenSPF, OpenDMARC 套餐，但是本人水平菜，机器配置也不高，折腾两天还没跑起来，正好看到订阅的 changelog 推荐了 maddy &lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> 于是搓搓手气试试这个邮局方案，以下是满足个人喜好的优点&lt;/p>
&lt;ul>
&lt;li>基于 golang 生态依赖少，方便打镜像&lt;/li>
&lt;li>验证数据存在 sqlite 里也很轻量&lt;/li>
&lt;li>没有 web 端，只需要 imap + thunderbird 即可&lt;/li>
&lt;li>配置文件相对简单&lt;/li>
&lt;/ul>
&lt;h2 id="install">install&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>mkdir -p /data/maddy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># hard link caddy&amp;#39;s crt and key to maddy&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln var/lib/caddy/.local/share/caddy/certificates/acme-v02.api.letsencrypt.org-directory/&lt;span style="color:#e6db74">${&lt;/span>domain&lt;span style="color:#e6db74">}&lt;/span>/&lt;span style="color:#e6db74">${&lt;/span>domain&lt;span style="color:#e6db74">}&lt;/span>.crt /data/maddy/&lt;span style="color:#e6db74">${&lt;/span>domain&lt;span style="color:#e6db74">}&lt;/span>.crt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln var/lib/caddy/.local/share/caddy/certificates/acme-v02.api.letsencrypt.org-directory/&lt;span style="color:#e6db74">${&lt;/span>domain&lt;span style="color:#e6db74">}&lt;/span>/&lt;span style="color:#e6db74">${&lt;/span>domain&lt;span style="color:#e6db74">}&lt;/span>.key /data/maddy/&lt;span style="color:#e6db74">${&lt;/span>domain&lt;span style="color:#e6db74">}&lt;/span>.key
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># foxcpp/maddy:v0.4.2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>podman run &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --name maddy &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -v /data/maddy:/data &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -p 25:25 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -p 143:143 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -p 587:587 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -p 993:993 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -p 465:465 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> yanyaoer/maddy:master
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># add user&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>podman run --rm -it -v /data/maddy:/data --entrypoint /bin/maddyctl yanyaoer/maddy:master creds create yanyao@mail.yadanhe.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考文档配置&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup> 完后发送邮件对方可收，本地 thunderbird 接收回复邮件时有问题&lt;/p>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> spf 验证无法通过，暂时禁用待修复&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 接收时报错 &amp;ldquo;Unexpected EOF when reciving from Steam&amp;rdquo;，等 0.4.3 发布 &lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>&lt;/li>
&lt;/ul>
&lt;h2 id="workaround">workaround&lt;/h2>
&lt;ul>
&lt;li>使用 master 分支打包镜像 maddy 0.5.0-dev15+ge4ad3bd 到 &lt;code>yanyaoer/maddy:master&lt;/code> 临时使用&lt;/li>
&lt;li>go 1.15.5 打包镜像时报错 &lt;code>go build runtime/cgo: invalid flag in go:cgo_ldflag: -Wl,-z,relro,-z,now&lt;/code>，在 builds.sh 里添加参数通过 &lt;sup id="fnref:4">&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>diff --git a/build.sh b/build.sh
index a76f6b6..b6e2eb2 100755
--- a/build.sh
+++ b/build.sh
@@ -119,6 +119,7 @@ read_config() {
 export MADDY_SRC=
 fi

+ export CGO_LDFLAGS_ALLOW=&amp;#39;-Wl,-z,relro,-z,now&amp;#39;
 export CGO_CFLAGS=&amp;#34;-g -O2 -D_FORTIFY_SOURCE=2 $CFLAGS&amp;#34;
 export CGO_CXXFLAGS=&amp;#34;-g -O2 -D_FORTIFY_SOURCE=2 $CXXFLAGS&amp;#34;
 export LDFLAGS=&amp;#34;-Wl,-z,relro,-z,now $LDFLAGS&amp;#34;
&lt;/code>&lt;/pre>&lt;p>** update: 2021-07-23 **
&lt;a href="https://github.com/foxcpp/maddy/releases/tag/v0.4.4">v0.4.4&lt;/a>
直接下载解压以上功能正常使用，不再使用 podman 部署&lt;/p>
&lt;h2 id="alternative">alternative&lt;/h2>
&lt;p>以下方案不太合口味，日后有缘再试&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/sovereign/sovereign">https://github.com/sovereign/sovereign&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/ajgon/self-hosted-mailserver/blob/master/docs/nsa-proof-your-e-mail-in-2-hours.md">https://github.com/ajgon/self-hosted-mailserver/blob/master/docs/nsa-proof-your-e-mail-in-2-hours.md&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/Mailu/Mailu">https://github.com/Mailu/Mailu&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/mailcow/mailcow-dockerized">https://github.com/mailcow/mailcow-dockerized&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/tonioo/modoboa">https://github.com/tonioo/modoboa&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/sovereign/sovereign">https://github.com/sovereign/sovereign&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/mail-in-a-box/mailinabox">https://github.com/mail-in-a-box/mailinabox&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/iredmail/iRedMail">https://github.com/iredmail/iRedMail&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a href="https://changelog.com/news/maddy-a-composable-allinone-mail-server-ljEe">https://changelog.com/news/maddy-a-composable-allinone-mail-server-ljEe&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a href="https://foxcpp.dev/maddy/tutorials/setting-up/">https://foxcpp.dev/maddy/tutorials/setting-up/&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a href="https://github.com/foxcpp/maddy/issues/300">https://github.com/foxcpp/maddy/issues/300&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:4">
&lt;p>&lt;a href="https://github.com/foxcpp/maddy/issues/299#issuecomment-735862091">https://github.com/foxcpp/maddy/issues/299#issuecomment-735862091&lt;/a>&amp;#160;&lt;a href="#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Utteranc Comments</title><link>https://xn--ynyo-2nad.com/posts/utteranc-comments/</link><pubDate>Fri, 30 Oct 2020 11:49:39 +0800</pubDate><guid>https://xn--ynyo-2nad.com/posts/utteranc-comments/</guid><description>&lt;p>utterances - A lightweight comments widget built on GitHub issues. Use GitHub issues for blog comments, wiki pages and more!&lt;/p>
&lt;h2 id="install">install&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>install &lt;a href="https://github.com/apps/utterances">utterances&lt;/a> on your repo&lt;/p>
&lt;/li>
&lt;li>
&lt;p>add the script to your template&lt;/p>
&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code>&amp;lt;script src=&amp;#34;https://utteranc.es/client.js&amp;#34;
 repo=&amp;#34;[ENTER REPO HERE]&amp;#34;
 issue-term=&amp;#34;pathname&amp;#34;
 theme=&amp;#34;github-light&amp;#34;
 crossorigin=&amp;#34;anonymous&amp;#34;
 async&amp;gt;
&amp;lt;/script&amp;gt;
&lt;/code>&lt;/pre>&lt;p>for exsamples &lt;a href="https://github.com/yanyaoer/yanyaoer.github.io/commit/f2508ce7557d372f909f68ee32371f86895fd92f">https://github.com/yanyaoer/yanyaoer.github.io/commit/f2508ce7557d372f909f68ee32371f86895fd92f&lt;/a>&lt;/p>
&lt;p>done.&lt;/p></description></item><item><title>Zotero as personal knowledge management</title><link>https://xn--ynyo-2nad.com/posts/zotero/</link><pubDate>Thu, 02 Jul 2020 22:55:53 +0800</pubDate><guid>https://xn--ynyo-2nad.com/posts/zotero/</guid><description>&lt;p>&lt;a href="https://www.zotero.org/">Zotero&lt;/a> 常用于科研的文献管理，由 firefox 浏览器插件发展到现在有了独立的桌面和&lt;a href="https://github.com/mickstar/Zoo-For-Zotero">移动客户端&lt;/a>。&lt;/p>
&lt;p>&lt;img src="https://xn--ynyo-2nad.com/zotero.png" alt="">&lt;/p>
&lt;ul>
&lt;li>本身具备简易的 rss 订阅功能可以用来追踪论文的更新&lt;/li>
&lt;li>注册在线账户后支持导出资料库给其他同学订阅&lt;/li>
&lt;li>浏览器插件 &lt;a href="https://github.com/zotero/zotero-connectors">zotero connectors&lt;/a> 则类似各类笔记应用的 web clipper，方便导入各种资料。&lt;strong>注意科学上网加载完整页面后再进行保存&lt;/strong>&lt;/li>
&lt;li>通过插件可以扩展出许多其他功能，比如文件同步、高级档案管理&lt;/li>
&lt;/ul>
&lt;h2 id="quickstart">quickstart&lt;/h2>
&lt;pre tabindex="0">&lt;code>brew cask install zotero
&lt;/code>&lt;/pre>&lt;p>这里简单用 &lt;a href="https://github.com/yanyaoer/caddy2-webdav">caddy2 搭建 webdav&lt;/a> 来同步附件，就没用高级的 &lt;a href="http://zotfile.com/">zotfile&lt;/a>&lt;/p>
&lt;p>至于自带的笔记功能怎么说呢～ 已经适应不能这种风格了&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>add-ons&lt;/th>
 &lt;th>link&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>quicklook&lt;/td>
 &lt;td>&lt;a href="https://github.com/mronkko/ZoteroQuickLook/releases">https://github.com/mronkko/ZoteroQuickLook/releases&lt;/a>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>markdown&lt;/td>
 &lt;td>&lt;a href="https://addons.thunderbird.net/zh-cn/thunderbird/addon/markdown-here-xul/">https://addons.thunderbird.net/zh-cn/thunderbird/addon/markdown-here-xul/&lt;/a>&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="subscription">subscription&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://arxiv.org/list/cs/recent">https://arxiv.org/list/cs/recent&lt;/a>
康奈尔大学提供的免费论文预览平台，主要订阅 cs.SD 音频相关更新&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://scholar.google.com/">https://scholar.google.com/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://academic.microsoft.com/">https://academic.microsoft.com/&lt;/a>
谷歌学术、微软学术也可以用来搜索一些关键词并订阅推送&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://www.storkapp.me/">https://www.storkapp.me/&lt;/a> 提供关键词订阅推送到邮箱&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://sci-hub.tw/">https://sci-hub.tw/&lt;/a> 实在找不到的下载就靠毛子的共享服务&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>将码农常用的文档工具 gitbook 转为 pdf&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>brew cask install calibre
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo npm install -g gitbook-cli
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gitbook install &lt;span style="color:#75715e"># for gitbook plugin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git clone https://github.com/prometheus/docs.git
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gitbook pdf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ps: gitbook 开源版本已经很久不维护了，可以换到 &lt;a href="https://github.com/honkit/honkit">honkit&lt;/a> fork 的版本&lt;/p>
&lt;h2 id="reference">reference&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://github.com/qiyuangong/How_to_Search_and_Read_a_Paper">https://github.com/qiyuangong/How_to_Search_and_Read_a_Paper&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/ying-zhang/ying-zhang.github.io/blob/blog/source/_posts/we-love-paper.md">https://github.com/ying-zhang/ying-zhang.github.io/blob/blog/source/_posts/we-love-paper.md&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.hanlindong.com/2018/zotero-citation-manager/">http://www.hanlindong.com/2018/zotero-citation-manager/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Rss2email</title><link>https://xn--ynyo-2nad.com/posts/rss2email/</link><pubDate>Tue, 23 Jun 2020 18:58:30 +0800</pubDate><guid>https://xn--ynyo-2nad.com/posts/rss2email/</guid><description>&lt;p>距离上次从 &lt;a href="https://blogtrottr.com">https://blogtrottr.com&lt;/a> 迁移 rss 订阅到 feedly 差不多五六年了，
这会网络不可用的状况又变得严重些，干脆还是用自建服务来接收感兴趣的内容，
当然备选方案也不少:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/miniflux/miniflux">https://github.com/miniflux/miniflux&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/SSilence/selfoss">https://github.com/SSilence/selfoss&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/FreshRSS/FreshRSS">https://github.com/FreshRSS/FreshRSS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://git.tt-rss.org/fox/tt-rss">https://git.tt-rss.org/fox/tt-rss&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>出于复古心理顺便减少对应的 app 安装选择问题，又选择了回归 email 方式订阅更新&lt;/p>
&lt;h2 id="安装配置">安装配置&lt;/h2>
&lt;p>rss2email 的安装到简单，参考 &lt;a href="https://github.com/rss2email/rss2email">官方文档&lt;/a>
直接 &lt;code>apt install rss2email&lt;/code>，默认配置会发送文本邮件，修改 &lt;code>html-mail=True&lt;/code>，
在我的环境里 smtp over sendgrid 很容易超配额，sendmail 基本发送不出去，
就配上 imap.google 账户自己发给自己啦～&lt;/p>
&lt;p>从 feedly 导出 opml 文件然后 &lt;code>r2e opmlimport&lt;/code> 完事大吉&lt;/p>
&lt;p>需要注意的是，在 &lt;code>r2e run&lt;/code> 的执行过程中对配置文件进行修改非常容易被覆盖 &lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>，不要同时搞太多操作就好，&lt;/p>
&lt;p>&lt;strong>update: 2020-09-18 17:34:49&lt;/strong>&lt;/p>
&lt;p>修改参数 &lt;code>force-from = True&lt;/code>，默认会从 feed 里优先提取作者或者发布站点的邮箱，导致 gmail 过滤器失败&lt;/p>
&lt;h2 id="定时任务">定时任务&lt;/h2>
&lt;p>现代 linux 发行版本(比如这里用的 ubuntu 20.04)，默认不带 cronjob 服务，改为 systemd 来管理各种服务，定时任务的写法稍微麻烦了些，先用当前 user 权限来 &lt;code>$HOME/.config/systemd/user&lt;/code> 写入定时任务配置&lt;/p>
&lt;p>定时器 &lt;code>rss2email.timer&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>Unit&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Description&lt;span style="color:#f92672">=&lt;/span>rss2email
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>Service&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Type&lt;span style="color:#f92672">=&lt;/span>oneshot
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ExecStart&lt;span style="color:#f92672">=&lt;/span>/usr/bin/r2e run
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>执行文件 &lt;code>rss2email.service&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>Timer&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>OnCalendar&lt;span style="color:#f92672">=&lt;/span>00/3:00
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Unit&lt;span style="color:#f92672">=&lt;/span>rss2email.service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>Install&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>WantedBy&lt;span style="color:#f92672">=&lt;/span>multi-user.target
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>启动服务&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>systemctl --user daemon-reload
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl --user enable rss2email.timer
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl --user start rss2email.timer
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl --user list-timers
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NEXT LEFT LAST PASSED UNIT ACTIVATES
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Tue 2020-06-23 12:00:00 UTC 1h 32min left n/a n/a rss2email.timer rss2email.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="定制邮件样式">定制邮件样式&lt;/h2>
&lt;p>默认的 configparser 参数会将 &lt;code>#&lt;/code> 设为注释，于是 &lt;code>rss2email/config.py&lt;/code> 和
&lt;code>$HOME/.config/rss2email.cfg&lt;/code> 中关于 &lt;code>#entry {...} #body {...}&lt;/code>
这几行一直显示不出来，临时解决方案把它们合并成一行可以先凑合着&lt;/p>
&lt;pre tabindex="0">&lt;code>css = ...
 .footer {
 background: #c3d9ff;
 border-top: solid 4px #c3d9ff;
 padding: 5px;
 margin-bottom: 0px;
 } #entry { border: solid 4px #c3d9ff; } #body { margin-left: 5px; margin-right: 5px; }
 img { max-width: 90% } /* 避免邮件里展示原图将页面撑得太宽 */
&lt;/code>&lt;/pre>&lt;p>&lt;a href="https://github.com/rss2email/rss2email/issues/7">Lines removed in stylesheet and optionally link to external one&lt;/a>&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a href="https://github.com/rss2email/rss2email/issues/110">https://github.com/rss2email/rss2email/issues/110&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Deploy bitwarden_rs with podman</title><link>https://xn--ynyo-2nad.com/posts/bitwarden_rs_with_podman/</link><pubDate>Thu, 04 Jun 2020 19:05:12 +0800</pubDate><guid>https://xn--ynyo-2nad.com/posts/bitwarden_rs_with_podman/</guid><description>&lt;p>bitwarden_rs&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> 是个用 rust/rocket 编写的非官方 api 实现，
&lt;a href="https://github.com/bitwarden/server">dotnet&lt;/a> 版本有点儿不太适合手头的部署环境&lt;/p>
&lt;p>这里用比较现代的 podman&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup> 来运行 docker 服务&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>podman run -d --name bitwarden -v /bw-data/:/data/:Z -e ROCKET_PORT&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">8080&lt;/span> -p 8080:8080 bitwardenrs/server:latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>podman generate systemd --name bitwarden --files
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mv container-bitwarden.service /etc/systemd/system/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl --user enable /etc/systemd/system/container-bitwarden.service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl --user start container-bitwarden.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后用 nginx 或者 caddy 代理一下 8080 端口即可连接客户端&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>brew install bitwarden-cli &lt;span style="color:#75715e"># npm install -g @bitwarden/cli&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bw config server https://bw.myserver.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>update 2021-04-01&lt;/strong> build bitwaden_rs from source&lt;/p>
&lt;pre tabindex="0">&lt;code># install rust
apt install git make gcc libssl-dev pkg-config curl
curl --proto &amp;#39;=https&amp;#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env

# build bitwarden_rs
git clone https://github.com/dani-garcia/bitwarden_rs/
cd bitwarden_rs/
cargo build --features sqlite --release
cp target/release/bitwarden_rs /usr/local/bin/

# download bw_web_vault from https://github.com/dani-garcia/bw_web_builds/releases
&lt;/code>&lt;/pre>&lt;p>edit /etc/systemd/system/bitwarden.service&lt;/p>
&lt;pre tabindex="0">&lt;code>[Unit]
Description=Bitwarden Server (Rust Edition)
Documentation=https://github.com/dani-garcia/bitwarden_rs
After=network.target

[Service]
EnvironmentFile=/data/bitwarden_rs/config.env
ExecStart=/usr/local/bin/bitwarden_rs
LimitNOFILE=1048576
LimitNPROC=64
PrivateTmp=true
PrivateDevices=true
ProtectHome=true
ProtectSystem=strict
WorkingDirectory=/data/bitwarden_rs/
ReadWriteDirectories=/data/bitwarden_rs/
ReadWriteDirectories=/data/bitwarden_rs/
AmbientCapabilities=CAP_NET_BIND_SERVICE
Restart=always
RestartSec=5
StartLimitBurst=3
StartLimitInterval=60
StandardOutput=null
StandardError=null

[Install]
WantedBy=multi-user.target
&lt;/code>&lt;/pre>&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a href="https://github.com/dani-garcia/bitwarden_rs/wiki/Using-Podman">https://github.com/dani-garcia/bitwarden_rs/wiki/Using-Podman&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a href="https://podman.io/getting-started/installation.html">https://podman.io/getting-started/installation.html&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Minio Storage Service</title><link>https://xn--ynyo-2nad.com/posts/minio-storage-service/</link><pubDate>Tue, 02 Jun 2020 09:47:48 +0800</pubDate><guid>https://xn--ynyo-2nad.com/posts/minio-storage-service/</guid><description>&lt;p>&lt;a href="https://min.io">min.io&lt;/a> 来自前 glusterFS 团队的分布式存储项目，
兼容 aws s3 / google cloud storage 接口，支持多磁盘、多节点，伸缩扩容方便，
golang 编写+单执行文件部署，非常适合用 k8s 编排复制来搭建私有对象存储服务&lt;/p>
&lt;p>&lt;strong>没有生产环境的使用经验，以下仅用于业余尝鲜&lt;/strong> &lt;del>六一节礼物&lt;/del>&lt;/p>
&lt;h2 id="gnulinux-下载安装">GNU/Linux 下载安装&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>wget https://dl.min.io/server/minio/release/linux-amd64/minio -O /usr/local/bin/minio
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chmod +x /user/local/bin/minio
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="添加用户组和配置文件">添加用户、组和配置文件&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>groupadd --system minio
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>useradd --system --gid minio --shell /usr/sbin/nologin --comment &lt;span style="color:#e6db74">&amp;#34;Minio file server&amp;#34;&lt;/span> minio
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir -p /data/minio
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chown -R minio:minio /data/minio
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># replace minio.service with your own config, eg. User,Group&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wget https://raw.githubusercontent.com/minio/minio-service/master/linux-systemd/minio.service -O /etc/systemd/system/minio.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="配置端口和密钥">配置端口和密钥&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># optional. run `uuidgen` to creates AK/SK&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cat &lt;span style="color:#e6db74">&amp;lt;&amp;lt;EOF &amp;gt;&amp;gt; /tmp/minio
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">MINIO_VOLUMES=&amp;#34;/data/minio/&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">MINIO_OPTS=&amp;#34;--address :9199&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">MINIO_ACCESS_KEY=`uuidgen`
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">MINIO_SECRET_KEY=`uuidgen`
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="启动服务">启动服务&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>systemctl enable minio.service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl start minio.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;a href="https://docs.min.io/docs/minio-client-complete-guide.html">客户端 mc&lt;/a>
使用说明参考官方文档好了，和 s3 命令行也没太多区别，
甚至可以用来做 gcs/s3 代理用&lt;/p>
&lt;h2 id="bonus">BONUS&lt;/h2>
&lt;p>之前断断续续申请了若干次的 oraclecloud 免费版，信用卡扣了钱也没通过简直过分，
直到 2020-06-01 当天终于成功开启 &lt;em>happy children&amp;rsquo;s day&lt;/em>&lt;/p>
&lt;p>&lt;a href="https://www.oracle.com/cloud/free/#always-free">always free plan&lt;/a>
2个虚拟机各有 1/8 ocpu 和 1G 内存，两块磁盘共 100G，#真香警告#&lt;/p>
&lt;p>开启机器后默认的安全策略只打开了 22 端口，自行添加 80/443
之后折腾半天还是无法连接，直接添加 iptables 放行即可，
搜索出来的那些直接打开全部端口的谜之操作请谨慎参考。
另外吐槽下这个双层防火墙配制有点费头发，还是 aws 那种操作一次就好&amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>iptables -A INPUT -p tcp -m tcp --dport &lt;span style="color:#ae81ff">80&lt;/span> -j ACCEPT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>iptables -A INPUT -p tcp -m tcp –-dport &lt;span style="color:#ae81ff">443&lt;/span> -j ACCEPT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>iptables-save &amp;gt; /etc/iptables/rules.v4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>