<!doctype html><html lang=en-US dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Posts | yÃ¡nyÃ o.com</title>
<link rel=stylesheet href=/css/main.min.8e8195eddcd5aefb03915f2af14e3db65c508a85859da96a19e43823f3c590fd.css integrity="sha256-joGV7dzVrvsDkV8q8U49tlxQioWFnalqGeQ4I/PFkP0=" crossorigin=anonymous></head><body><header><header><a href=https://xn--ynyo-2nad.com/ class=title><h2>yÃ¡nyÃ o.com</h2></a><nav><a href=/>Home</a>
<a href=/posts>Posts</a>
<a href=/index.xml>RSS</a></nav></header><main><h1>Posts</h1><h2><a href=/posts/poormans-asr/>poorman's ASR solution</a></h2><h2 id=intro>Intro</h2><p>å¤§æ¦‚20å¹´h2æœŸé—´ï¼Œå¬é—»feishuæ”¯æŒäº†ä¼šè®®è‡ªåŠ¨è½¬è¯‘å­—å¹•åŠŸèƒ½ï¼Œbut
å½“æ—¶ç§æœ‰åŒ–éƒ¨ç½²çš„ç‰ˆæœ¬ä¸€ç›´æ²¡æœ‰æ”¯æŒï¼Œäºæ˜¯ç§ä¸‹æ‰¾äº†è¯­éŸ³åŠ©æ‰‹å›¢é˜Ÿçš„åŒå­¦ä¼å›¾è¹­æœåŠ¡ç”¨äºè‡ªåŠ¨ç”Ÿæˆä¼šè®®çºªè¦ï¼Œ<strong>æ‡’å³æ˜¯åŸåŠ¨åŠ›</strong></p><p>å† but ä¸€ä¸‹ï¼Œå‡ºäºæœåŠ¡æˆæœ¬è€ƒé‡æ²¡æœ‰è¹­æˆåŠŸï¼Œåæ¥å¯¹åº”çš„åŒå­¦ä¹Ÿé™†ç»­ç¦»èŒå°±æ²¡ä¸‹æ–‡äº†</p><p>23å¹´å¤§æ¨¡å‹å¼€å§‹å„ç§ç«çƒ­èµ·æ¥ï¼Œäºæ˜¯å€ŸåŠ© openai çš„ whisper
åœ¨æœ¬åœ°é™†ç»­å†™äº†ä¸€äº›éŸ³é¢‘è½¬æ–‡æœ¬çš„å°ä»»åŠ¡ï¼Œæ¯”å¦‚ yt-dlp ä¸‹è½½ bilibili
è§†é¢‘åè½¬éŸ³é¢‘å†è½¬æ–‡æœ¬ï¼Œä¸ªäººä¹ æƒ¯ä¸Šé˜…è¯»çš„æ•ˆç‡è¿˜æ˜¯é«˜äºè§†é¢‘å½¢å¼çš„</p><ul><li>[scribe] <a href=https://gist.github.com/yanyaoer/5cc7b0dd6729f306ad3cb740d501cabd>https://gist.github.com/yanyaoer/5cc7b0dd6729f306ad3cb740d501cabd</a></li></ul><p>å¦å¤–ç»“åˆè¯­éŸ³è¯†åˆ«å’Œ LLM çš„å‘æ•£ï¼Œä¹Ÿè¯•ç€æ“äº†ç‚¹è¯­éŸ³åŠ©æ‰‹çš„å°è¯•</p><ul><li>[voice assistant with computer-use] <a href=https://gist.github.com/yanyaoer/752a73d2d6df5a2aa0de179a0f68e8a1>https://gist.github.com/yanyaoer/752a73d2d6df5a2aa0de179a0f68e8a1</a></li><li>[hook for whisper llm-talk] <a href=https://github.com/yanyaoer/whisper.cpp/commit/da85a1b4791e4a7eeb5adb31d47d4c5e53618234>https://github.com/yanyaoer/whisper.cpp/commit/da85a1b4791e4a7eeb5adb31d47d4c5e53618234</a></li></ul><p>ä½†æ˜¯å®æ—¶è¯­éŸ³è¯†åˆ«åœºæ™¯ï¼Œç”¨ whiper-stream / sense-voice
è¿™ç±»æ–¹æ¡ˆè¿˜æ˜¯ä¼šæœ‰è¯†åˆ«ä¸å‡†ç¡®ã€å†…å®¹ä¸¢å¤±çš„é—®é¢˜å­˜åœ¨ï¼Œè°ƒæ•´ step/length
å‚æ•°æ•ˆæœä¹Ÿä¸æ˜æ˜¾ï¼Œvad æ–¹æ¡ˆå»¶è¿Ÿä¹Ÿå¾ˆé«˜&mldr;</p><h2 id=new-solution>New solution</h2><p>ä¸Šå‘¨å¿½ç„¶æƒ³èµ·äº† kaldi é¡¹ç›®ä¹Ÿè›®ç»å…¸äº†ï¼Œäºæ˜¯å°±è¯•ç€ç”¨ sherpa-[ncnn|onnx] å°è¯•äº†ä¸‹ demo
sherpa-[ncnn|onnx]-microphone
æµå¼è¯†åˆ«è¾“å‡ºçš„æ•´ä½“æ•ˆæœå·²ç»å¾ˆæ¥è¿‘æŠŠéŸ³é¢‘æ–‡ä»¶å–‚ç»™å¤§æ¨¡å‹çš„è´¨é‡</p><p>äºæ˜¯è”ç³»ç»´æŠ¤è€… @csukuangfj
è¯·æ•™æ€ä¹ˆæå‡è¯†åˆ«å‡†ç¡®ç‡ï¼Œå¤§ä½¬è¿‡äºå·å‘¨æœ«è¿˜ç»™é€ äº†æ–°æ–¹æ¡ˆå’Œè¾“å‡ºä¼˜åŒ–ï¼Œç”šè‡³è¿˜å½•äº† b
ç«™è§†é¢‘ <a href=https://www.bilibili.com/video/BV1xcEMz8EsX/>https://www.bilibili.com/video/BV1xcEMz8EsX/</a></p><iframe src="//player.bilibili.com/player.html?bvid=BV1xcEMz8EsX&page=1" scrolling=no autoplay border=0 frameborder=no framespacing=0 allowfullscreen></iframe><ul><li>[Add real-time speech recognition example for SenseVoice. (#2197)] <a href=https://github.com/k2-fsa/sherpa-onnx/commit/53518efd2fe70f49b86f180a4e5b49fdc374da82>https://github.com/k2-fsa/sherpa-onnx/commit/53518efd2fe70f49b86f180a4e5b49fdc374da82</a></li><li>[Fix displaying streaming speech recognition results for Python. (#2196)] <a href=https://github.com/k2-fsa/sherpa-onnx/commit/4a833a754743076d68252731c681511e2d9390bd>https://github.com/k2-fsa/sherpa-onnx/commit/4a833a754743076d68252731c681511e2d9390bd</a></li></ul><p>å¦å¤–ä¹Ÿä½“éªŒåˆ° two-pass åŒæ¨¡å‹è¯†åˆ«çš„æ•ˆæœï¼Œä¸¤ç§æ–¹å¼éƒ½èƒ½æ»¡è¶³ä¿ºçš„ä½¿ç”¨åœºæ™¯ğŸ‰</p><h2><a href=/posts/pandoc-md2pdf/>Pandoc generate pdf from markdown</a></h2><h2 id=intro>Intro</h2><p>å§‹ç»ˆä¸å¤ªä¹ æƒ¯ word/wps ç±»å·¥å…·ç¼–è¾‘æ–‡æœ¬ï¼Œå†ä¸€æ¬¡å°è¯•ç”¨ <code>pandoc</code> æ¥ç”Ÿæˆ pdfï¼Œç®—æ˜¯åˆæ­¥ææ˜ç™½ä¸€ç‚¹ç©æ³•ï¼Œæœ¬æ–‡ç•¥è¿‡ markdown çš„éƒ¨åˆ†ä¸»è¦è®°å½• <code>latex</code> ç›¸å…³è®¾å®šå†…å®¹ã€‚</p><ul><li><code>wkhtmltopdf</code> ä¹Ÿæ˜¯ä¸€ä¸ªé€‰é¡¹ï¼Œä½†æ˜¯è½¬ HTML å†ç”Ÿæˆ pdf å°±æ²¡å•¥æŒ‘æˆ˜äº†é¢å“ˆå“ˆ</li></ul><h2 id=setup>Setup</h2><p>é¦–å…ˆå®Œæ•´å®‰è£… latex åŒ…</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ brew uninstall --cask basictex
</span></span><span style=display:flex><span>$ brew install --cask mactex
</span></span></code></pre></div><h2 id=latex-template>Latex template</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>title</span>: <span style=color:#e6db74>&#34;Your article title here&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>date</span>: <span style=color:#e6db74>2023-02-20</span>
</span></span><span style=display:flex><span><span style=color:#f92672>fontsize</span>: <span style=color:#ae81ff>12pt</span>
</span></span><span style=display:flex><span><span style=color:#75715e># fc-list :lang=zh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#mainfont: &#34;PingFang SC&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>mainfont</span>: <span style=color:#e6db74>&#34;Sarasa Mono SC&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># monofont: &#34;FantasqueSansM Nerd Font Mono&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>monofont</span>: <span style=color:#e6db74>&#34;Sarasa Mono SC&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ä¸­æ–‡æ¢è¡Œæ”¯æŒ</span>
</span></span><span style=display:flex><span><span style=color:#f92672>lang</span>: <span style=color:#ae81ff>zh-CN</span>
</span></span><span style=display:flex><span><span style=color:#f92672>geometry</span>: <span style=color:#ae81ff>margin=2cm</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è®¾ç½®åŒæ </span>
</span></span><span style=display:flex><span><span style=color:#75715e># classoption=twocolumn</span>
</span></span><span style=display:flex><span>---
</span></span></code></pre></div><p>åœ¨ markdown æ–‡æ¡£çš„æœ€å‰é¢åŠ å…¥ä»¥ä¸Š metadata ç®€åŒ–å‘½ä»¤å‚æ•°è®¾å®šï¼Œå®é™…æ•ˆæœç­‰ä»·äº</p><h2><a href=/posts/flair-58/>Flair-58 Espresso Maker</a></h2><h2 id=flair-58>flair-58</h2><p><a href=https://flairespresso.com/product/flair-58/>https://flairespresso.com/product/flair-58/</a></p><p><img src=/flair-coffee.jpg alt></p><p>å‘¨æœ«æµªè´¹äº†2å¤©è±†å­ï¼Œç»ˆäºæŠ˜è…¾å‡ºæ¯”è¾ƒç†æƒ³çš„è®¾å®š</p><ul><li>é¢„çƒ­ï¼šæµ…çƒ˜ = 3æ¡£ï¼Œä¸­çƒ˜ = 2æ¡£ï¼Œæ·±çƒ˜ = 1æ¡£</li><li>ç£¨è±†ï¼šC40 è°ƒåˆ° 8 æ ¼(æµ…çƒ˜è±† +=1)</li></ul><p>å¥¶æ³¡æœºæ²¡åˆ°ä½ï¼Œå…ˆç”¨å¨ƒçš„å°å¥¶é”…ç…® 200ml Oatly ç‡•éº¦å¥¶ï¼Œç¨çƒ­å°±å¥½ï¼Œæ²¡æœ‰æ‰“å‡ºæ³¡æ²«ä¹Ÿå°±æ— æ‰€è°“æ‹‰èŠ±äº†<br>PlanB: å¾®æ³¢ç‚‰åŠ çƒ­ + <a href=https://www.ikea.cn/cn/zh/p/produkt-pu-luo-da-da-mo-qi-hei-se-70301165/>å®œå®¶ Â¥9.9 æ‰‹æŒå¥¶æ³¡å™¨</a></p><p>æˆ‘ä¹°çš„ä¼˜åŒ–åç‰ˆæœ¬é»˜è®¤é…æ— åº•æ‰‹æŸ„ + 58mm 18gç²‰ç¢—ï¼Œè€Œä¸ŠåŠå¹´æ‰¹æ¬¡çš„å¥½åƒæ˜¯ 20gç²‰ç¢—ï¼Œåº•éƒ¨æ²¡æœ‰å‡¹å¼§çº¿ï¼Œç„¶ååˆ†æ°´ç½‘å’Œå†²ç…®å¤´æ˜¯ä¸€ä½“çš„ï¼Œæ¯æ¯éƒ½å¾—æ‹†ä¸‹æ¥æ¸…ç†ï¼Œç°åœ¨åªéœ€è¦æ‹†æ‰‹æŸ„æ´—æ´—ç²‰ç¢—å’Œåˆ†æ°´ç½‘å°±å¥½ï¼Œæ–¹ä¾¿è¿ç»­å‡ºæ¯(ä½†æ˜¯å¯¹äºæ²¡æœ‰å¤šä¸ªæ‰‹æŸ„å’Œç²‰ç¢—çš„åˆé˜¶ç”¨æˆ·æ¥è¯´ï¼Œé‡æ–°å¡«ç²‰åŠ æ°´çš„æ“ä½œå¹¶ä¸è¿ç»­ -.-)<br>ç¾¤é‡Œæœ‰å¤§ä½¬<a href="https://docs.google.com/document/d/1szvhjTE2F7lzhr38phggVUO50fkbddq0/edit?usp=sharing&amp;ouid=115932911354635105266&amp;rtpof=true&amp;sd=true">æ”¹è£…äº†åº•åº§å’Œæ”¯æ¶çš„æ–¹æ¡ˆ</a>ï¼Œè§£å†³ä¸‹å‹å‰å€¾é—®é¢˜å’Œä½¿ç”¨12cm+çš„ç§¤</p><p>è€Œæ— åº•æ‰‹æŸ„å®‰è£…è¿˜ä¸å¤ªç†Ÿç»ƒï¼Œç»å¸¸è¦å¼¯è…°ä½å¤´å»çœ‹å°ç¿…è†€æœ‰æ²¡æœ‰å¡åˆ°ä½ï¼Œç„¶åæ³¨æ°´å†å®‰è£…å‹åŠ›è¡¨(é¡ºä¾¿å½“é¢„æµ¸æ³¡)ï¼Œ18gè±†å‡º 36gæ¶²ä½“ï¼Œå¦‚æœç²‰ç£¨å¾—è¿‡ç»†ï¼Œä¸‹å‹ä¼šå¾ˆè´¹åŠ²</p><p>è™½ç„¶ç›®å‰ 5-9bar ä¹‹é—´å‹çš„æ›²çº¿è¿˜ä¸å¤ªç¨³å®šï¼Œå¶å°”é€šé“ä¹Ÿä¸å¤ªé¡ºæ»‹åˆ°æ¯å¤–ï¼Œä½†æ˜¯é¦™æµ“çš„ crema å·²ç„¶è¿œè¶…é¢„æœŸ(å…¶å®å¾ˆå®¹æ˜“è¿‡èƒï¼Œä½†æ˜¯å®¶å±å–ä¸å‡ºæ¥ğŸ˜‚)</p><p>è¯•äº†ä¸‹ç”¨å†°çš„å±ˆè‡£æ°åš coffee sodaï¼Œéš¾å–ğŸ¤¢</p><p>å¥½å¤šæƒ³ä¹°çš„é…ä»¶ï¼šæ‹‰èŠ±å¥¶ç¼¸ã€ç²‰é”¤ã€å¸ƒç²‰å™¨ã€é¼ å°¾ç²‰ç¢—ã€ç²‰é¥¼åƒåœ¾ç›’</p><p><strong>update: 2022-08-19 14:09:08</strong></p><p>ä¹°äº†æ–°çš„æ‹‰èŠ±ç¼¸å’Œç§°ï¼Œä½†æ˜¯æ‡’åˆ°å®Œå…¨ä¸æƒ³ç¢°ç‰›å¥¶ï¼Œonly pure coffee and water&mldr;</p><p>æ—©æ™¨çš„å†²ç…®å¼€å§‹é€æ¸æš´èºï¼Œç›´æ¥ç£¨58gç²‰åˆ†3æ¬¡è£…å¡«ã€ä¸‹å‹ã€å‡ºæ¶²åˆ°ä¸€ä¸ªæ¯é‡Œï¼Œå†åŠ å†°å—åˆ†è£…æˆä¸¤ä»½ long black å‡ºé—¨ï¼Œå°‘æ´—ä¸¤æ¬¡æ¯å­åŠ¨ä½œä¹Ÿæ›´æµç•…ï½å¤§æ¦‚15-20åˆ†é’Ÿå®Œæˆ</p><h2><a href=/posts/toy/>å‰æ‰‹å¥½ç‰©æ¨è</a></h2><ul><li>Insta360 GO2 æ‹‡æŒ‡è¿åŠ¨ç›¸æœº</li><li>å··è´©å°é…’ - ä¸œæ–¹ç”„é€‰é‡‘é…’</li><li>Reebok royal techque æ¿é‹</li><li>ALTRA Escalante 2.5 è½»é‡é›¶è½å·®è·‘é‹</li><li>SENNHEISER IE300 è€³æœº</li><li>PhD èƒ½é‡æ£’</li></ul><h2><a href=/posts/volvo-v60/>Volvo v60</a></h2><p>å› ä¸ºå®¶åº­æ–°æˆå‘˜åŠ å…¥ï¼Œæ‰€ä»¥ä¹°è½¦çš„ä¼˜å…ˆçº§æäº†ä¸Šæ¥ã€‚ä¸€å¼€å§‹è€ƒè™‘å¤§å°ºå¯¸6/7åº§suvï¼Œèƒ½è£…å…¨å®¶äººçŸ­é€”å‡ºè¡Œï¼Œæ¯”å¦‚highlander, outlander, explorer, Pajero&mldr;åæ¥å› ä¸ºä»Šå¹´å„ç§æ–°æ¬¾ä¸Šå¸‚ï¼Œåˆ°æœ€ç»ˆæè½¦æ—¶é—´æœ‰ç‚¹æ™šï¼Œå†åŠ ä¸ŠåŸå¸‚æ‹¥å µå’Œåœè½¦é—®é¢˜ï¼Œå›å½’åˆ°æœ€åˆçš„é€‰é¡¹ä¹Ÿæ˜¯ä¸€ç›´ç§è‰çš„æ—…è¡Œè½¦Volvo v60</p><p>ä¸­é—´è¿˜å»çœ‹è¿‡Jaguarå’ŒAlfa Romeoï¼Œå¯æƒœåæ’ç©ºé—´æœ‰ç‚¹å°ï¼Œå¯¹å¤–å‹å†…é¥°éå¸¸æ»¡æ„ï¼ŒåŠ¨åŠ›å’Œæ“æ§ä¹Ÿå¾ˆå¯ä»¥ï¼Œå°¤å…¶Julieçš„å‰è„¸é¢œå€¼å¤ªå‘½ä¸­æˆ‘äº†ï¼Œä¸€ç›´å¯¹mx5è¿™ç±»ç¬‘è„¸æ— æ³•æŠ—æ‹’â€¦</p><p>V60åœ¨4såº—è¯•é©¾çš„è±ªåç‰ˆï¼Œåˆšå¼€å§‹è¿˜æŒºä¸é€‚åº”è½¬å‘æ‰‹æ„Ÿå’Œæ²¹é—¨åˆ¹è½¦çš„ï¼Œæ„Ÿè§‰éƒ½å¾ˆæ²‰å¾ˆé‡ã€‚æ¯”èµ·æ¥ä»¥å‰å¼€è¿‡çš„å„ç§å°é’¢ç‚®å’Œå®¶ç”¨è½¿è½¦ï¼Œæ²‰ç€æœ‰ä½™çµæ´»ä¸å¤Ÿï¼Œå‰æœŸä¸ç†Ÿæ‚‰çš„æ—¶å€™æ“ä½œèµ·æ¥éƒ½å¾—å°å¿ƒç¿¼ç¿¼ã€‚</p><p>æœ€åè®¢è½¦é€‰äº†è‡´è¿œç„°å½±è“è¿åŠ¨æ¬¾ï¼Œå› ä¸ºå‚å®¶ç›´é”€çš„å…³ç³»ä¹Ÿæ²¡è®²ä»·ï¼Œå°±è·Ÿé”€å”®è¦äº†è¡Œè½¦è®°å½•ä»ªå’Œå„¿ç«¥åº§æ¤…ã€‚ç›®å‰å¼€ä¸¤ä¸ªæœˆå°ä¸€åƒå…¬é‡Œçš„è¡Œç¨‹ï¼Œå¤§æ¦‚æ€»ç»“äº›ç‚¹å§</p><ul><li>å¤–è§‚çº¿æ¡æ¯”ä¾‹ï¼Œå®¡ç¾è§‚å› äººè€Œå¼‚ï¼Œä½†æ˜¯V60å„å¤„éƒ½åœ¨æˆ‘çš„åŒºé—´å†…</li><li>nappaçš®åº§æ¤…èˆ’é€‚å’Œæ”¯æ’‘éƒ½å¾ˆåˆ°ä½ï¼Œå‰æ’æœ‰å¯è°ƒçš„è…¿æ‹–å’Œè…°æ’‘ã€‚å¯¹è±ªåç‰ˆçš„å®æœ¨è£…é¥°æ°´æ™¶æ¡£æ†å…¶å®æ²¡å•¥éœ€æ±‚ï¼Œæ°›å›´ç¯ä¹Ÿè›®ç®€çº¦ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤œåº—é£ã€‚å¯æƒœé€‰é…çš„äº¤è½¦æ—¶é—´å¤ªé•¿ï¼Œä¸ç„¶åº§æ¤…é€šé£ã€å†¬å­£åŒ…ã€ç±³è‰²å†…é¥°éƒ½æƒ³åŠ </li><li>åæ’ç©ºé—´åä¸¤äººè¿˜è¡Œï¼Œä½†æ˜¯ä¸­é—´çš„åœ°å°å¤ªé«˜ï¼Œä¸é€‚åˆé•¿é€”5äººå‡ºè¡Œ</li><li>åå¤‡ç®±å°±ä¸ç”¨å¤¸äº†ï¼Œç‹—å­çš„èˆªç©ºç®±ä¸€ç›´å¡åœ¨é‡Œé¢ï¼Œå‡ºå»ç©å¾ˆæ–¹ä¾¿ï¼Œå»å®œå®¶å°±æŠŠååº§æ”¾å¹³ã€‚6æœˆä»½æ¬å®¶å°±è·‘äº†ä¸¤è¶Ÿï¼Œä¸Šæ¬¡æ¬å®¶å€Ÿè€ç‹çš„a3å¯æ‹‰äº†56è¶Ÿ</li><li>48vç”µæœº+autoholdï¼Œèµ·æ­¥å¹³é¡ºæ²¡æœ‰çº¯ç‡ƒæ²¹è½¦å‹èµ·æ­¥è½°å‘åŠ¨æœºé‚£ä¸ªé¢¤æŠ–</li><li>ä½è½¬æ²¹é—¨åŠ¨åŠ›å“åº”ç•¥æœ‰å»¶è¿Ÿï¼Œå‡æ¡£ä¸ç®—å¾ˆè¿…é€Ÿï¼Œä¸è¿‡ç›¸æ¯”èµ·golfï¼Œ508è¦å¥½å¾ˆå¤š</li><li>æ²¹è€—å¸‚åŒºæ—¥å¸¸11å‡ç™¾å…¬é‡Œï¼Œè·‘æœºåœºé«˜é€Ÿèƒ½åˆ°6.1å·¦å³ï¼Œå¹³æ—¶ä¸€ä¸ªæœˆåŠ ä¸€æ¬¡æ»¡ç®±æ²¹ï¼Œæ¨è95å·</li><li>æ–¹å‘ç›˜è™šä½æ˜æ˜¾ï¼Œè¿‡å¼¯ä¼šä¹ æƒ¯æ€§å¤šæ‰“ä¸€äº›ä½ç½®ï¼Œè½¬å‘æ¯”hatchbackè½¦å‹éƒ½è¦é‡è®¸å¤šã€‚å‰è„¸ä¸¤ä¾§çš„å­˜åœ¨æ„Ÿæ˜æ˜¾ï¼Œä½åå§¿çš„æ—¶å€™ä¼šå¼€å¾—è°¨æ…ï¼Œåè€Œä¸ä¼šè§‰å¾—å±è‚¡æœ‰ä»€ä¹ˆé˜»ç¢</li><li>åº•ç›˜ç¡®å®åœ¨å¼€è¿‡çš„è½¦é‡Œç®—å¾—ä¸Šä¼˜ç§€ï¼Œè¿‡å¼¯å’Œæ»¤éœ‡éƒ½å¾ˆæ‰å®ã€‚é™éŸ³å®å±ä¸€èˆ¬ï¼Œé£å™ªèƒå™ªåœ¨åæ’(æˆ–è€…è½¦é€Ÿè¶…è¿‡100)å°¤å…¶æ˜æ˜¾ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸è€ƒè™‘é¡¶ä¸Šè¡Œæç®±</li><li>autopilot æ¨¡å¼åœ¨è·‘é«˜é€Ÿæ—¶éå¸¸æ„‰æ‚¦ï¼Œè½¦é“ä¿æŒæ¯”æˆ‘æ‰“æ–¹å‘é¡ºæ»‘å¤šäº†ï¼Œè·Ÿå‰è½¦ä¿æŒè½¦è·ä¹Ÿå¾ˆå¯é ï¼Œå¦å¤–å…»æˆäº†å¹¶çº¿å‰ä¸€å®šå…ˆæ‰“ç¯çš„ä¹ æƒ¯ï¼Œå¦åˆ™è½¦å­ä¼šè‡ªå·±ä¿®æ­£ã€‚èƒ½ç§°ä¸ºç‘•ç–µçš„å°±æ˜¯è‡ªåŠ¨åˆ¹è½¦ä¸å¤Ÿçº¿æ€§ï¼Œä¹˜å®¢ä¼šæœ‰æ˜æ˜¾çš„æ‹‰æ‰¯æ„Ÿç”šè‡³ç‚¹å¤´ï¼›æ‹¥å µè·¯æ®µè¿˜å¾—åˆ‡å›æ‰‹åŠ¨æ¨¡å¼ï¼Œè·Ÿè½¦è·ç¦»åœ¨æˆ‘è¿™è¾¹å¤ªå®¹æ˜“è¢«åŠ å¡</li></ul><h2><a href=/posts/self-host-maddy-mail-server/>Self Host Maddy Mail Server</a></h2><h2 id=maddy>maddy</h2><blockquote><p>Composable all-in-one mail server. <a href=https://github.com/foxcpp/maddy>https://github.com/foxcpp/maddy</a></p></blockquote><p>å‡†å¤‡è‡ªå»ºç³»åˆ—æœåŠ¡æ›¿æ¢æ‰ google å…¨å®¶æ¡¶ï¼Œå…ˆè¯•äº†ä¼ ç»Ÿçš„ Postfix, Dovecot, OpenDKIM, OpenSPF, OpenDMARC å¥—é¤ï¼Œä½†æ˜¯æœ¬äººæ°´å¹³èœï¼Œæœºå™¨é…ç½®ä¹Ÿä¸é«˜ï¼ŒæŠ˜è…¾ä¸¤å¤©è¿˜æ²¡è·‘èµ·æ¥ï¼Œæ­£å¥½çœ‹åˆ°è®¢é˜…çš„ changelog æ¨èäº† maddy <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> äºæ˜¯æ“æ“æ‰‹æ°”è¯•è¯•è¿™ä¸ªé‚®å±€æ–¹æ¡ˆï¼Œä»¥ä¸‹æ˜¯æ»¡è¶³ä¸ªäººå–œå¥½çš„ä¼˜ç‚¹</p><ul><li>åŸºäº golang ç”Ÿæ€ä¾èµ–å°‘ï¼Œæ–¹ä¾¿æ‰“é•œåƒ</li><li>éªŒè¯æ•°æ®å­˜åœ¨ sqlite é‡Œä¹Ÿå¾ˆè½»é‡</li><li>æ²¡æœ‰ web ç«¯ï¼Œåªéœ€è¦ imap + thunderbird å³å¯</li><li>é…ç½®æ–‡ä»¶ç›¸å¯¹ç®€å•</li></ul><h2 id=install>install</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p /data/maddy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># hard link caddy&#39;s crt and key to maddy</span>
</span></span><span style=display:flex><span>ln var/lib/caddy/.local/share/caddy/certificates/acme-v02.api.letsencrypt.org-directory/<span style=color:#e6db74>${</span>domain<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>domain<span style=color:#e6db74>}</span>.crt /data/maddy/<span style=color:#e6db74>${</span>domain<span style=color:#e6db74>}</span>.crt
</span></span><span style=display:flex><span>ln var/lib/caddy/.local/share/caddy/certificates/acme-v02.api.letsencrypt.org-directory/<span style=color:#e6db74>${</span>domain<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>domain<span style=color:#e6db74>}</span>.key /data/maddy/<span style=color:#e6db74>${</span>domain<span style=color:#e6db74>}</span>.key
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># foxcpp/maddy:v0.4.2</span>
</span></span><span style=display:flex><span>podman run <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name maddy <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -v /data/maddy:/data <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 25:25 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 143:143 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 587:587 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 993:993 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 465:465 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  yanyaoer/maddy:master
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># add user</span>
</span></span><span style=display:flex><span>podman run --rm -it -v /data/maddy:/data --entrypoint /bin/maddyctl yanyaoer/maddy:master creds create yanyao@mail.yadanhe.com
</span></span></code></pre></div><p>å‚è€ƒæ–‡æ¡£é…ç½®<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> å®Œåå‘é€é‚®ä»¶å¯¹æ–¹å¯æ”¶ï¼Œæœ¬åœ° thunderbird æ¥æ”¶å›å¤é‚®ä»¶æ—¶æœ‰é—®é¢˜</p><h2><a href=/posts/utteranc-comments/>Utteranc Comments</a></h2><p>utterances - A lightweight comments widget built on GitHub issues. Use GitHub issues for blog comments, wiki pages and more!</p><h2 id=install>install</h2><ol><li><p>install <a href=https://github.com/apps/utterances>utterances</a> on your repo</p></li><li><p>add the script to your template</p></li></ol><pre tabindex=0><code>&lt;script src=&#34;https://utteranc.es/client.js&#34;
        repo=&#34;[ENTER REPO HERE]&#34;
        issue-term=&#34;pathname&#34;
        theme=&#34;github-light&#34;
        crossorigin=&#34;anonymous&#34;
        async&gt;
&lt;/script&gt;
</code></pre><p>for exsamples <a href=https://github.com/yanyaoer/yanyaoer.github.io/commit/f2508ce7557d372f909f68ee32371f86895fd92f>https://github.com/yanyaoer/yanyaoer.github.io/commit/f2508ce7557d372f909f68ee32371f86895fd92f</a></p><p>done.</p><h2><a href=/posts/zotero/>Zotero as personal knowledge management</a></h2><p><a href=https://www.zotero.org/>Zotero</a> å¸¸ç”¨äºç§‘ç ”çš„æ–‡çŒ®ç®¡ç†ï¼Œç”± firefox æµè§ˆå™¨æ’ä»¶å‘å±•åˆ°ç°åœ¨æœ‰äº†ç‹¬ç«‹çš„æ¡Œé¢å’Œ<a href=https://github.com/mickstar/Zoo-For-Zotero>ç§»åŠ¨å®¢æˆ·ç«¯</a>ã€‚</p><p><img src=/zotero.png alt></p><ul><li>æœ¬èº«å…·å¤‡ç®€æ˜“çš„ rss è®¢é˜…åŠŸèƒ½å¯ä»¥ç”¨æ¥è¿½è¸ªè®ºæ–‡çš„æ›´æ–°</li><li>æ³¨å†Œåœ¨çº¿è´¦æˆ·åæ”¯æŒå¯¼å‡ºèµ„æ–™åº“ç»™å…¶ä»–åŒå­¦è®¢é˜…</li><li>æµè§ˆå™¨æ’ä»¶ <a href=https://github.com/zotero/zotero-connectors>zotero connectors</a> åˆ™ç±»ä¼¼å„ç±»ç¬”è®°åº”ç”¨çš„ web clipperï¼Œæ–¹ä¾¿å¯¼å…¥å„ç§èµ„æ–™ã€‚<strong>æ³¨æ„ç§‘å­¦ä¸Šç½‘åŠ è½½å®Œæ•´é¡µé¢åå†è¿›è¡Œä¿å­˜</strong></li><li>é€šè¿‡æ’ä»¶å¯ä»¥æ‰©å±•å‡ºè®¸å¤šå…¶ä»–åŠŸèƒ½ï¼Œæ¯”å¦‚æ–‡ä»¶åŒæ­¥ã€é«˜çº§æ¡£æ¡ˆç®¡ç†</li></ul><h2 id=quickstart>quickstart</h2><pre tabindex=0><code>brew cask install zotero
</code></pre><p>è¿™é‡Œç®€å•ç”¨ <a href=https://github.com/yanyaoer/caddy2-webdav>caddy2 æ­å»º webdav</a> æ¥åŒæ­¥é™„ä»¶ï¼Œå°±æ²¡ç”¨é«˜çº§çš„ <a href=http://zotfile.com/>zotfile</a></p><p>è‡³äºè‡ªå¸¦çš„ç¬”è®°åŠŸèƒ½æ€ä¹ˆè¯´å‘¢ï½ å·²ç»é€‚åº”ä¸èƒ½è¿™ç§é£æ ¼äº†</p><table><thead><tr><th>add-ons</th><th>link</th></tr></thead><tbody><tr><td>quicklook</td><td><a href=https://github.com/mronkko/ZoteroQuickLook/releases>https://github.com/mronkko/ZoteroQuickLook/releases</a></td></tr><tr><td>markdown</td><td><a href=https://addons.thunderbird.net/zh-cn/thunderbird/addon/markdown-here-xul/>https://addons.thunderbird.net/zh-cn/thunderbird/addon/markdown-here-xul/</a></td></tr></tbody></table><h2 id=subscription>subscription</h2><ul><li><p><a href=https://arxiv.org/list/cs/recent>https://arxiv.org/list/cs/recent</a>
åº·å¥ˆå°”å¤§å­¦æä¾›çš„å…è´¹è®ºæ–‡é¢„è§ˆå¹³å°ï¼Œä¸»è¦è®¢é˜… cs.SD éŸ³é¢‘ç›¸å…³æ›´æ–°</p></li><li><p><a href=https://scholar.google.com/>https://scholar.google.com/</a></p></li><li><p><a href=https://academic.microsoft.com/>https://academic.microsoft.com/</a>
è°·æ­Œå­¦æœ¯ã€å¾®è½¯å­¦æœ¯ä¹Ÿå¯ä»¥ç”¨æ¥æœç´¢ä¸€äº›å…³é”®è¯å¹¶è®¢é˜…æ¨é€</p></li><li><p><a href=https://www.storkapp.me/>https://www.storkapp.me/</a> æä¾›å…³é”®è¯è®¢é˜…æ¨é€åˆ°é‚®ç®±</p></li><li><p><a href=https://sci-hub.tw/>https://sci-hub.tw/</a> å®åœ¨æ‰¾ä¸åˆ°çš„ä¸‹è½½å°±é æ¯›å­çš„å…±äº«æœåŠ¡</p></li></ul><p>å°†ç å†œå¸¸ç”¨çš„æ–‡æ¡£å·¥å…· gitbook è½¬ä¸º pdf</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew cask install calibre
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo npm install -g gitbook-cli
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gitbook install  <span style=color:#75715e># for gitbook plugin</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>git clone https://github.com/prometheus/docs.git
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gitbook pdf
</span></span></code></pre></div><p>ps: gitbook å¼€æºç‰ˆæœ¬å·²ç»å¾ˆä¹…ä¸ç»´æŠ¤äº†ï¼Œå¯ä»¥æ¢åˆ° <a href=https://github.com/honkit/honkit>honkit</a> fork çš„ç‰ˆæœ¬</p><h2><a href=/posts/rss2email/>Rss2email</a></h2><p>è·ç¦»ä¸Šæ¬¡ä» <a href=https://blogtrottr.com>https://blogtrottr.com</a> è¿ç§» rss è®¢é˜…åˆ° feedly å·®ä¸å¤šäº”å…­å¹´äº†ï¼Œ
è¿™ä¼šç½‘ç»œä¸å¯ç”¨çš„çŠ¶å†µåˆå˜å¾—ä¸¥é‡äº›ï¼Œå¹²è„†è¿˜æ˜¯ç”¨è‡ªå»ºæœåŠ¡æ¥æ¥æ”¶æ„Ÿå…´è¶£çš„å†…å®¹ï¼Œ
å½“ç„¶å¤‡é€‰æ–¹æ¡ˆä¹Ÿä¸å°‘:</p><ul><li><a href=https://github.com/miniflux/miniflux>https://github.com/miniflux/miniflux</a></li><li><a href=https://github.com/SSilence/selfoss>https://github.com/SSilence/selfoss</a></li><li><a href=https://github.com/FreshRSS/FreshRSS>https://github.com/FreshRSS/FreshRSS</a></li><li><a href=https://git.tt-rss.org/fox/tt-rss>https://git.tt-rss.org/fox/tt-rss</a></li></ul><p>å‡ºäºå¤å¤å¿ƒç†é¡ºä¾¿å‡å°‘å¯¹åº”çš„ app å®‰è£…é€‰æ‹©é—®é¢˜ï¼Œåˆé€‰æ‹©äº†å›å½’ email æ–¹å¼è®¢é˜…æ›´æ–°</p><h2 id=å®‰è£…é…ç½®>å®‰è£…é…ç½®</h2><p>rss2email çš„å®‰è£…åˆ°ç®€å•ï¼Œå‚è€ƒ <a href=https://github.com/rss2email/rss2email>å®˜æ–¹æ–‡æ¡£</a>
ç›´æ¥ <code>apt install rss2email</code>ï¼Œé»˜è®¤é…ç½®ä¼šå‘é€æ–‡æœ¬é‚®ä»¶ï¼Œä¿®æ”¹ <code>html-mail=True</code>ï¼Œ
åœ¨æˆ‘çš„ç¯å¢ƒé‡Œ smtp over sendgrid å¾ˆå®¹æ˜“è¶…é…é¢ï¼Œsendmail åŸºæœ¬å‘é€ä¸å‡ºå»ï¼Œ
å°±é…ä¸Š imap.google è´¦æˆ·è‡ªå·±å‘ç»™è‡ªå·±å•¦ï½</p><p>ä» feedly å¯¼å‡º opml æ–‡ä»¶ç„¶å <code>r2e opmlimport</code> å®Œäº‹å¤§å‰</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ <code>r2e run</code> çš„æ‰§è¡Œè¿‡ç¨‹ä¸­å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹éå¸¸å®¹æ˜“è¢«è¦†ç›– <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>ï¼Œä¸è¦åŒæ—¶æå¤ªå¤šæ“ä½œå°±å¥½ï¼Œ</p><p><strong>update: 2020-09-18 17:34:49</strong></p><p>ä¿®æ”¹å‚æ•° <code>force-from = True</code>ï¼Œé»˜è®¤ä¼šä» feed é‡Œä¼˜å…ˆæå–ä½œè€…æˆ–è€…å‘å¸ƒç«™ç‚¹çš„é‚®ç®±ï¼Œå¯¼è‡´ gmail è¿‡æ»¤å™¨å¤±è´¥</p><h2 id=å®šæ—¶ä»»åŠ¡>å®šæ—¶ä»»åŠ¡</h2><p>ç°ä»£ linux å‘è¡Œç‰ˆæœ¬(æ¯”å¦‚è¿™é‡Œç”¨çš„ ubuntu 20.04)ï¼Œé»˜è®¤ä¸å¸¦ cronjob æœåŠ¡ï¼Œæ”¹ä¸º systemd æ¥ç®¡ç†å„ç§æœåŠ¡ï¼Œå®šæ—¶ä»»åŠ¡çš„å†™æ³•ç¨å¾®éº»çƒ¦äº†äº›ï¼Œå…ˆç”¨å½“å‰ user æƒé™æ¥ <code>$HOME/.config/systemd/user</code> å†™å…¥å®šæ—¶ä»»åŠ¡é…ç½®</p><h2><a href=/posts/bitwarden_rs_with_podman/>Deploy bitwarden_rs with podman</a></h2><p>bitwarden_rs<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> æ˜¯ä¸ªç”¨ rust/rocket ç¼–å†™çš„éå®˜æ–¹ api å®ç°ï¼Œ
<a href=https://github.com/bitwarden/server>dotnet</a> ç‰ˆæœ¬æœ‰ç‚¹å„¿ä¸å¤ªé€‚åˆæ‰‹å¤´çš„éƒ¨ç½²ç¯å¢ƒ</p><p>è¿™é‡Œç”¨æ¯”è¾ƒç°ä»£çš„ podman<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> æ¥è¿è¡Œ docker æœåŠ¡</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>podman run -d --name bitwarden -v /bw-data/:/data/:Z -e ROCKET_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>8080</span> -p 8080:8080 bitwardenrs/server:latest
</span></span><span style=display:flex><span>podman generate systemd --name bitwarden --files
</span></span><span style=display:flex><span>mv container-bitwarden.service /etc/systemd/system/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>systemctl --user enable /etc/systemd/system/container-bitwarden.service
</span></span><span style=display:flex><span>systemctl --user start container-bitwarden.service
</span></span></code></pre></div><p>ç„¶åç”¨ nginx æˆ–è€… caddy ä»£ç†ä¸€ä¸‹ 8080 ç«¯å£å³å¯è¿æ¥å®¢æˆ·ç«¯</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install bitwarden-cli  <span style=color:#75715e># npm install -g @bitwarden/cli</span>
</span></span><span style=display:flex><span>bw config server https://bw.myserver.com
</span></span></code></pre></div><p><strong>update 2021-04-01</strong> build bitwaden_rs from source</p><pre tabindex=0><code># install rust
apt install git make gcc libssl-dev pkg-config curl
curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env

# build bitwarden_rs
git clone https://github.com/dani-garcia/bitwarden_rs/
cd bitwarden_rs/
cargo build --features sqlite --release
cp target/release/bitwarden_rs /usr/local/bin/

# download bw_web_vault from https://github.com/dani-garcia/bw_web_builds/releases
</code></pre><p>edit /etc/systemd/system/bitwarden.service</p><h2><a href=/posts/minio-storage-service/>Minio Storage Service</a></h2><p><a href=https://min.io>min.io</a> æ¥è‡ªå‰ glusterFS å›¢é˜Ÿçš„åˆ†å¸ƒå¼å­˜å‚¨é¡¹ç›®ï¼Œ
å…¼å®¹ aws s3 / google cloud storage æ¥å£ï¼Œæ”¯æŒå¤šç£ç›˜ã€å¤šèŠ‚ç‚¹ï¼Œä¼¸ç¼©æ‰©å®¹æ–¹ä¾¿ï¼Œ
golang ç¼–å†™+å•æ‰§è¡Œæ–‡ä»¶éƒ¨ç½²ï¼Œéå¸¸é€‚åˆç”¨ k8s ç¼–æ’å¤åˆ¶æ¥æ­å»ºç§æœ‰å¯¹è±¡å­˜å‚¨æœåŠ¡</p><p><strong>æ²¡æœ‰ç”Ÿäº§ç¯å¢ƒçš„ä½¿ç”¨ç»éªŒï¼Œä»¥ä¸‹ä»…ç”¨äºä¸šä½™å°é²œ</strong> <del>å…­ä¸€èŠ‚ç¤¼ç‰©</del></p><h2 id=gnulinux-ä¸‹è½½å®‰è£…>GNU/Linux ä¸‹è½½å®‰è£…</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://dl.min.io/server/minio/release/linux-amd64/minio -O /usr/local/bin/minio
</span></span><span style=display:flex><span>chmod +x /user/local/bin/minio
</span></span></code></pre></div><h2 id=æ·»åŠ ç”¨æˆ·ç»„å’Œé…ç½®æ–‡ä»¶>æ·»åŠ ç”¨æˆ·ã€ç»„å’Œé…ç½®æ–‡ä»¶</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>groupadd --system minio
</span></span><span style=display:flex><span>useradd --system --gid minio --shell /usr/sbin/nologin --comment <span style=color:#e6db74>&#34;Minio file server&#34;</span> minio
</span></span><span style=display:flex><span>mkdir -p /data/minio
</span></span><span style=display:flex><span>chown -R minio:minio /data/minio
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># replace minio.service with your own config, eg. User,Group</span>
</span></span><span style=display:flex><span>wget https://raw.githubusercontent.com/minio/minio-service/master/linux-systemd/minio.service -O /etc/systemd/system/minio.service
</span></span></code></pre></div><h2 id=é…ç½®ç«¯å£å’Œå¯†é’¥>é…ç½®ç«¯å£å’Œå¯†é’¥</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># optional. run `uuidgen` to creates AK/SK</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt;&gt; /tmp/minio
</span></span></span><span style=display:flex><span><span style=color:#e6db74>MINIO_VOLUMES=&#34;/data/minio/&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>MINIO_OPTS=&#34;--address :9199&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>MINIO_ACCESS_KEY=`uuidgen`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>MINIO_SECRET_KEY=`uuidgen`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h2 id=å¯åŠ¨æœåŠ¡>å¯åŠ¨æœåŠ¡</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl enable minio.service
</span></span><span style=display:flex><span>systemctl start minio.service
</span></span></code></pre></div><p><a href=https://docs.min.io/docs/minio-client-complete-guide.html>å®¢æˆ·ç«¯ mc</a>
ä½¿ç”¨è¯´æ˜å‚è€ƒå®˜æ–¹æ–‡æ¡£å¥½äº†ï¼Œå’Œ s3 å‘½ä»¤è¡Œä¹Ÿæ²¡å¤ªå¤šåŒºåˆ«ï¼Œ
ç”šè‡³å¯ä»¥ç”¨æ¥åš gcs/s3 ä»£ç†ç”¨</p><h2><a href=/posts/pour-over-coffee-makers/>Pour Over Coffee Makers</a></h2><h2 id=åŠå…¬å®¤æ—¥å¸¸ç”¨å“>åŠå…¬å®¤æ—¥å¸¸ç”¨å“</h2><ul><li>hario v60 2äººä»½ç»ç’ƒæ»¤æ¯ <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></li><li>hario v60 600ml äº‘æœµåˆ†äº«å£¶ <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></li><li>comandante c40 æ‰‹æ‘‡ç£¨è±†æœº <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></li><li>kalita 700ml ç»†å˜´å£¶ <sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup></li><li>rivers seek éšæ‰‹æ¯ <sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup></li></ul><hr><ul><li><p>2020-0615 æ–°è´­å…¥ Mr.clever èªæ˜æ¯ <sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup></p></li><li><p>2020-0622 æ–°è´­å…¥ hario drip kettle air <sup id=fnref:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup>ï¼Œ
ç”¨äº†ä¸¤æ¬¡æ‰‹æ„Ÿåè½»æ°´æµæ§åˆ¶å¾—ä¸ç¨³ T_T</p></li><li><p>2020-1027 æ–°è´­å…¥ fellow ode ç”µåŠ¨ç£¨è±†æœº <sup id=fnref:8><a href=#fn:8 class=footnote-ref role=doc-noteref>8</a></sup></p></li><li><p>2020-1109 æ–°è´­å…¥ fellow stagg ekg æ¸©æ§å£¶ <sup id=fnref:9><a href=#fn:9 class=footnote-ref role=doc-noteref>9</a></sup></p></li><li><p>2023-half æ–°è´­å…¥ hoop æ¾¡ç›†æ»¤æ¯ <sup id=fnref:10><a href=#fn:10 class=footnote-ref role=doc-noteref>10</a></sup>ï¼Œç±»ä¼¼èªæ˜æ¯ä½†ä¼šæ‹‰é•¿èƒå–æ—¶é—´</p></li></ul><p>æ¯å¤©ä¸€æ—© <del>ä¸­åˆ</del> åˆ°å…¬å¸å¼€å§‹çƒ§æ°´ï¼Œç„¶åå­å‘²å­å‘²æ‘‡ 40g è±†å­å…‘ 600ml å·¦å³çš„æ°´</p><p>æ‰‹æ³•å°±æ¯”è¾ƒ <del>éšæ„</del> ä¸šä½™å•¦ï¼Œä¸»è¦å‚è€ƒä¸‹é¢ä¸¤ä¸ªè§†é¢‘ï¼Œå‡ºå“å¤§æ¦‚ç‡è‡ªå·±éƒ½è¿˜æŒºå–œæ¬¢çš„
<strong>æŒ‰æ¯”ä¾‹åŠ æ³¨æ°´é‡ç¿»å€</strong></p><h3 id=46-method-by-tetsu-kasuya>&ldquo;4:6 method&rdquo; by Tetsu Kasuya <sup id=fnref:11><a href=#fn:11 class=footnote-ref role=doc-noteref>11</a></sup></h3><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/wmCW8xSWGZY?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><h3 id=the-ultimate-v60-technique-by-james-hoffmann>&ldquo;The Ultimate V60 Technique&rdquo; by James Hoffmann</h3><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/AI4ynXzkSQo?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><h2 id=å®¶åº­ç‰ˆ>å®¶åº­ç‰ˆ</h2><ul><li>baratza encore ç”µåŠ¨ç£¨è±†å™¨ <sup id=fnref:12><a href=#fn:12 class=footnote-ref role=doc-noteref>12</a></sup></li><li>kinto OCT 2äººä»½é™¶ç“·æ»¤æ¯ <sup id=fnref:13><a href=#fn:13 class=footnote-ref role=doc-noteref>13</a></sup></li><li>ikea vardagen 500ml ç»ç’ƒé‡æ¯ <sup id=fnref:14><a href=#fn:14 class=footnote-ref role=doc-noteref>14</a></sup></li><li>muji ä¸‡å¤çƒ§é©¬å…‹æ¯ <sup id=fnref:15><a href=#fn:15 class=footnote-ref role=doc-noteref>15</a></sup></li></ul><hr><ul><li>2020-0615 æ–°è´­å…¥ hario filter-in å†·èƒç“¶ <del>å·²ç¢</del>ï¼Œ21å¹´å¤å†æ¬¡è´­å…¥ <sup id=fnref:16><a href=#fn:16 class=footnote-ref role=doc-noteref>16</a></sup></li></ul><p>åˆšå¼€å§‹çš„æ—¶å€™è£…å¤‡ä¸Šäº¤äº†ä¸å°‘å­¦è´¹ï¼Œæ¯”å¦‚ï¼š<del>ç”µåŠ¨ç è±†æœº</del>ã€<del>å»‰ä»·æ‰‹ç£¨</del>ã€<del>aeropress</del>ï¼Œ
è™½ç„¶ä¸èƒ½ä¸€æ¦‚è€Œè®ºï¼Œå®é™…ä¸Šå¾ˆå¤§ç¨‹åº¦è¿˜æ˜¯éµå¾ªä¸€åˆ†é’±ä¸€åˆ†è´§çš„åŸåˆ™ï¼Œæ€§èƒ½è¶Šå¥½åˆ™ä»·æ ¼å‘ˆæŒ‡æ•°ä¸Šæ¶¨
æ¡ä»¶å…è®¸çš„è¯å°½é‡é€‰æ‹©å¥½ä¸€ç‚¹çš„è®¾å¤‡ï¼Œæ¯•ç«Ÿä¹Ÿæ˜¯å¤©å¤©è¦ç”¨çš„å®¶ä¼™äº‹</p><h2><a href=/posts/mastodon/>Mastodon</a></h2><p><code>Mastodon é•¿æ¯›è±¡</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> &ndash; åŸºäº rubyonrails/reactjs/nodejs å¼€å‘çš„åˆ†å¸ƒå¼ &
å»ä¸­å¿ƒåŒ– twiter cloneã€‚åˆ©ç”¨ç©ºé—²æ—¶é—´åœ¨ aws lightsail ä¸Šå¼€äº†ä¸ªå®ä¾‹æŠŠæœåŠ¡è·‘äº†èµ·æ¥</p><p>ä¸€å¼€å§‹èµ°äº†äº›å¼¯è·¯ï¼Œå› ä¸ºé€‰æœºæˆ¿å’Œçœé’±çš„ç¼˜æ•…ï¼Œé‡å»ºäº†è‹¥å¹²æ¬¡æ“ä½œç³»ç»Ÿï¼Œæœ€åçš„é€‰æ‹©æ˜¯
tokyo+cloudflareï¼Œæ²¡é”™æˆ‘åˆå¥—äº† cdnï¼Œå®åœ¨æ˜¯æµ·å¤–çº¿è·¯åˆ°åŒ—äº¬è”é€šä¸ç¨³å®š</p><p>å®‰è£…æ­¥éª¤æ²¡æœ‰ä½¿ç”¨ docker è€Œæ˜¯å‚è€ƒæ–‡æ¡£ä»æºç å®‰è£…<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>ï¼ŒåŸå› å’Œè§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><ul><li><p><del>æœºå™¨ç”¨ $3.5/mo 512mem æœ€ä¾¿å®œçš„é‚£æ¡£æ¶ˆè´¹é™çº§</del>(512M å†…å­˜é‡å¯ä¼šæ‹‰å®å¼±é¸¡ï¼ŒæœåŠ¡å·²è¿ç§»åˆ° oraclecloud)ï¼Œå‡ºäº net/io æ€§èƒ½è€ƒè™‘å°±ä¸ä½¿ docker å•¦</p></li><li><p>å†…å­˜é—®é¢˜ï¼Œ<code>RAILS_ENV=production bundle exec rake mastodon:setup</code>
è¿™ä¸€æ­¥éª¤æ‰§è¡Œåˆ° <code>rails assets:precompile</code>ï¼Œ
ä¸ç®¡æ˜¯åœ¨ docker é‡Œè·‘è¿˜æ˜¯ç›´æ¥è¿è¡Œéƒ½ä¼šæŠ¥ swap åˆ†åŒºä¸è¶³ï¼Œæ‰¾åˆ°ä¸¤ä¸ªæ–¹æ¡ˆæ¥è§£å†³:</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># create swapfile &lt;https://linuxize.com/post/create-a-linux-swap-file/&gt;</span>
</span></span><span style=display:flex><span>$ sudo fallocate -l 2G /swapfile
</span></span><span style=display:flex><span>$ sudo chmod <span style=color:#ae81ff>600</span> /swapfile
</span></span><span style=display:flex><span>$ sudo mkswap /swapfile
</span></span><span style=display:flex><span>$ sudo swapon /swapfile
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># verify active</span>
</span></span><span style=display:flex><span>$ sudo swapon --show
</span></span><span style=display:flex><span><span style=color:#75715e># optional: low value is better for production</span>
</span></span><span style=display:flex><span>$ sudo sysctl vm.swappiness<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span></code></pre></div><h2 id=é‚®ä»¶é…ç½®>é‚®ä»¶é…ç½®</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># By default the memory limit in Node. js is 512 mb, </span>
</span></span><span style=display:flex><span><span style=color:#75715e># use command â€”- max-old-space-size to increase the memory limit</span>
</span></span><span style=display:flex><span>$ NODE_OPTIONS<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;--max-old-space-size=4096&#34;</span> RAILS_ENV<span style=color:#f92672>=</span>production bundle exec rails assets:precompile
</span></span></code></pre></div><p>ç›´æ¥é…ç½® localhost å‘é€é‚®ä»¶æ— æ•ˆï¼Œå…ˆç”¨ <a href=https://sendgrid.com/>sendgrid</a> å…è´¹ç‰ˆé¡¶ç€, ä¸€å¤© 100 å°é‚®ä»¶ç›®å‰å¤Ÿç”¨</p><h2><a href=/posts/gitlab-repo/>Gitlab Repo</a></h2><p>gitlab é‡Œé¢å·²ç»æœ‰åæ¥ä¸ª groupï¼Œå‡ ç™¾ä¸ª projectï¼Œè™½ç„¶ä¸ä¸€å®šä¼šæ¯ä¸ªé¡¹ç›®éƒ½å‚ä¸ï¼Œ
ä½†æ˜¯ä¸ºäº†å¿«é€ŸåŒæ­¥ä»£ç ï¼Œåˆæ¡èµ·äº† android å¼€å‘å¸¸ç”¨çš„ repo å‘½ä»¤æ¥ç®¡ç†å¤šé¡¹ç›®ä»£ç ã€‚
è¿™é‡Œä½¿ç”¨äº† gitlab graphql æ¥å£æ¥éå†é¡¹ç›®ç”Ÿæˆåˆ†ç»„çš„ manifest æ–‡ä»¶</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env python</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> argparse
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> json
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> urllib2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>GITLAB_HOST <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;gitlab.mydomain.com&#34;</span>
</span></span><span style=display:flex><span>GITLAB_SSH_URL <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;ssh://git@&#34;</span> <span style=color:#f92672>+</span> GITLAB_HOST
</span></span><span style=display:flex><span>GITLAB_GRAPHQL_URL <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://&#34;</span> <span style=color:#f92672>+</span> GITLAB_HOST <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;/api/graphql&#34;</span>
</span></span><span style=display:flex><span>GITLAB_TOKEN <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>GITLAB_GROUP <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;&#34;</span>]
</span></span><span style=display:flex><span>BLACK_LIST <span style=color:#f92672>=</span> (<span style=color:#e6db74>&#34;&#34;</span>,)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ä»¥ä¸Šé…ç½®ä¿®æ”¹ä¸ºè‡ªå·±çš„è®¾å®š</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>template <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;&#34;&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;!-- autogen by gen.py, do not edit this file --&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;manifest&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  &lt;remote  name=&#34;origin&#34; fetch=&#34;</span><span style=color:#e6db74>{ssh_url}</span><span style=color:#e6db74>&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  &lt;default revision=&#34;master&#34; remote=&#34;origin&#34; sync-c=&#34;true&#34; sync-j=&#34;4&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74></span><span style=color:#e6db74>{content}</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;/manifest&gt;&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>write_file</span>(content, filename<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;default.xml&#34;</span>):
</span></span><span style=display:flex><span>    _file <span style=color:#f92672>=</span> os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>join(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>dirname(__file__), filename)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(_file, <span style=color:#e6db74>&#34;w&#34;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>        f<span style=color:#f92672>.</span>write(template<span style=color:#f92672>.</span>format(content<span style=color:#f92672>=</span>content, ssh_url<span style=color:#f92672>=</span>GITLAB_SSH_URL))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>fetch_project_of_group</span>(group, write<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>):
</span></span><span style=display:flex><span>    data <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;{ group(fullPath: &#34;</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;) { projects { nodes { fullPath } } }}&#39;</span> <span style=color:#f92672>%</span> group
</span></span><span style=display:flex><span>    req <span style=color:#f92672>=</span> urllib2<span style=color:#f92672>.</span>Request(
</span></span><span style=display:flex><span>        GITLAB_GRAPHQL_URL,
</span></span><span style=display:flex><span>        data<span style=color:#f92672>=</span>json<span style=color:#f92672>.</span>dumps(dict(query<span style=color:#f92672>=</span>data)),
</span></span><span style=display:flex><span>        headers<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Authorization&#34;</span>: <span style=color:#e6db74>&#34;Bearer &#34;</span> <span style=color:#f92672>+</span> GITLAB_TOKEN,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Content-Type&#34;</span>: <span style=color:#e6db74>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    resp <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>load(urllib2<span style=color:#f92672>.</span>urlopen(req))
</span></span><span style=display:flex><span>    content <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>join(
</span></span><span style=display:flex><span>        [
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;&lt;project path=&#34;</span><span style=color:#e6db74>{d}</span><span style=color:#e6db74>&#34; name=&#34;</span><span style=color:#e6db74>{d}</span><span style=color:#e6db74>&#34;/&gt;&#39;</span><span style=color:#f92672>.</span>format(d<span style=color:#f92672>=</span>p[<span style=color:#e6db74>&#34;fullPath&#34;</span>])
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> p <span style=color:#f92672>in</span> resp[<span style=color:#e6db74>&#34;data&#34;</span>][<span style=color:#e6db74>&#34;group&#34;</span>][<span style=color:#e6db74>&#34;projects&#34;</span>][<span style=color:#e6db74>&#34;nodes&#34;</span>]
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> p[<span style=color:#e6db74>&#34;fullPath&#34;</span>] <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> BLACK_LIST
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> write:
</span></span><span style=display:flex><span>        write_file(content, filename<span style=color:#f92672>=</span>group<span style=color:#f92672>.</span>replace(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#e6db74>&#34;-&#34;</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;-group.xml&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> content
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>():
</span></span><span style=display:flex><span>    parser <span style=color:#f92672>=</span> argparse<span style=color:#f92672>.</span>ArgumentParser(description<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Process some projects.&#34;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;-G&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;--group&#34;</span>,
</span></span><span style=display:flex><span>        help<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;for group/subgroup or all&#34;</span>,
</span></span><span style=display:flex><span>        type<span style=color:#f92672>=</span>str,
</span></span><span style=display:flex><span>        choices<span style=color:#f92672>=</span>ns <span style=color:#f92672>+</span> [<span style=color:#e6db74>&#34;all&#34;</span>, <span style=color:#e6db74>&#34;default&#34;</span>],
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    arg <span style=color:#f92672>=</span> parser<span style=color:#f92672>.</span>parse_args()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> arg<span style=color:#f92672>.</span>group <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;all&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> GITLAB_GROUP:
</span></span><span style=display:flex><span>            fetch_project_of_group(x)
</span></span><span style=display:flex><span>        d <span style=color:#f92672>=</span> [fetch_project_of_group(x, write<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>) <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> GITLAB_GROUP]
</span></span><span style=display:flex><span>        write_file(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>join(d))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>elif</span> arg<span style=color:#f92672>.</span>group <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;default&#34;</span>:
</span></span><span style=display:flex><span>        d <span style=color:#f92672>=</span> [fetch_project_of_group(x, write<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>) <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> GITLAB_GROUP]
</span></span><span style=display:flex><span>        write_file(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>join(d))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        fetch_project_of_group(arg<span style=color:#f92672>.</span>group)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    main()
</span></span></code></pre></div><p><strong>USAGE:</strong> åˆ›å»ºå®Œ manifest æ–‡ä»¶ä¹‹åæäº¤åˆ°ä»“åº“å°±å¯ä»¥æ„‰å¿«çš„ç©è€å•¦</p><h2><a href=/posts/dash-replacement/>Dash Replacement with tmux</a></h2><p>é€šè¿‡ tmux å¿«æ·é›†æˆæ›¿æ¢ dash.app æŸ¥è¯¢å¼€å‘æ–‡æ¡£</p><pre tabindex=0><code>$ brew install dasht

$ dasht-docsets | tr &#39;A-Z&#39; &#39;a-z&#39;
go
javascript
python_3
rust
tornado
</code></pre><pre tabindex=0><code># tmux.conf quick start
bind -n S-up command-prompt -p &#39;docset:&#39; &#34;splitw -h -fb -l 80 dasht &#39;%%&#39;&#34;
</code></pre><h2><a href=/posts/cloudflare-gost/>Cloudflare Gost</a></h2><p>ä»æ¸…æ˜èŠ‚å¼€å§‹ï¼Œç¨³å®šè¿è¡Œå¥½å‡ å¹´çš„ ss æœåŠ¡å™¨ç»ˆäºé˜µäº¡äº†ï¼Œæ‰€æœ‰ç«¯å£å…¨æŒ‚ã€‚ä¸€ç›´è¹­å…¬å¸çš„ vpn æŸ¥èµ„æ–™ä¹ŸæŒºåˆ°äº†äº”ä¸€ï¼Œå®åœ¨æ‹–å»¶å¤Ÿå¤Ÿçš„å°±å†å¦å¤–å¼€äº†ä¸€å°æœºå™¨ä¸­è½¬è¿‡å»è¿ç§»æ•°æ®ï¼Œä¸è¿‡å˜›å¹´çºªå¤§äº†åˆå¼€å§‹çŠ¯æ‡’ï¼Œä¼å›¾æ‹¯æ•‘è·å¾—èµ„æ ¼è®¤è¯çš„æœºå™¨ï¼Œé€šè¿‡ä¸€ç•ªç½‘ä¸Šå†²æµªå­¦ä¹ åˆ°äº†ç›®å‰(å®æµ‹å¯ç”¨)èƒ½æ»¡è¶³æˆ‘éœ€æ±‚çš„æ–¹æ¡ˆã€‚ç®€å•æ¥è¯´å°±æ˜¯ï¼šcloudflare[åæ–‡ç®€ç§°ä¸º cf] + websockets over gostï¼Œå®é™…çš„å®¢æˆ·ç«¯é€šè¿‡ cdn ä»£ç†å†æ¥å…¥æœåŠ¡</p><p>æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p><ul><li><p>gost å¯åŠ¨æ—¶ç»‘å®šçš„ localhost ä¸ç›´æ¥å¯¹å¤–è®¿é—®ï¼Œèµ°äº† caddy çš„è½¬å‘ï¼Œè€Œè¿™ä¸€æ­¥å’Œ cf çš„ ssl è¯ä¹¦é…ç½®ä¼šé€ æˆä¸åœçš„é‡å®šå‘è·³è½¬ï¼Œéœ€è¦å°† cf åŠ å¯†æ¨¡å¼é…ç½®ä¸º flexible</p></li><li><p>ç„¶åä¿®æ”¹ caddy çš„åŸŸåé…ç½®ä¸º <a href=http://domain.com>http://domain.com</a> <a href=https://domain.com>https://domain.com</a> { &mldr; } é˜»æ­¢ cf å’Œ caddy ä¹‹é—´çš„ http -> https</p></li><li><p>gost æœåŠ¡ç«¯ç›‘å¬ ws åè®®ï¼Œæœ¬åœ°çš„ gost å®¢æˆ·ç«¯è½¬å‘ wss åè®®è¿æ¥ cf_domain:443</p></li><li><p>éœ€è¦é‰´æƒçš„æ–¹æ¡ˆä½¿ç”¨ socks5+wss://username:password@domain:port</p></li><li><p>android å®¢æˆ·ç«¯çš„è®¾ç½®ï¼Œå› ä¸ºä½¿ç”¨äº† ws åè®®ï¼Œæ‰€ä»¥éœ€è¦å°†åŸŸåå†™å…¥åˆ°æ’ä»¶çš„é…ç½®é‡Œï¼Œç›´æ¥ç”¨åŸŸåå˜é‡æ— æ³•è§£æ</p></li></ul><p>å…·ä½“é…ç½®å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œ<strong>ä¸€åˆ‡æµªè´¹çš„æ—¶é—´éƒ½æ˜¯æºäºæ²¡è®¤çœŸä»”ç»†çœ‹æ–‡æ¡£</strong></p><ul><li><a href=https://github.com/haoel/haoel.github.io>https://github.com/haoel/haoel.github.io</a></li><li><a href=https://github.com/ginuerzh/gost>https://github.com/ginuerzh/gost</a></li><li><a href=https://github.com/xausky/ShadowsocksGostPlugin>https://github.com/xausky/ShadowsocksGostPlugin</a></li></ul><p><strong>update 2021-03-01</strong> ç”±äº shawdowsocks çš„ android å®¢æˆ·ç«¯å‡çº§å¯¼è‡´æ’ä»¶ä¸å¯ç”¨ï¼Œå¦å¤–éƒ¨ç½²äº† <a href=https://github.com/txthinking/brook>brook</a> wsserver ç»™æ‰‹æœºä½¿ç”¨</p><h2><a href=/posts/webpack-resolve-local-module/>webpack resolve local module</a></h2><p>æœ€è¿‘çš„é¡¹ç›®åˆšå¼€å§‹ï¼Œè®¾è®¡çš„ç›®å½•å±‚çº§æœ‰ç‚¹æ·±<br>ç»å¸¸ä¼šåœ¨å¥½å‡ å±‚æœ¬åœ°è·¯å¾„ä¹‹é—´äº’ç›¸å¼•ç”¨</p><p><code>import Image from '../../../../components/image'</code></p><p>è¿™å±‚å±‚å å çš„è·¯å¾„å†™èµ·æ¥å®åœ¨ä¸‘é™‹<br>ä¸ç”±å¾—æƒ³èµ· Python ä»é¡¹ç›®æ ¹ç›®å½•å¼•ç”¨æ¨¡å—<br>ç„¶åç ”ç©¶äº†ä¸€ä¸‹ Node.js é‡Œçš„å‡ ç§ç®€æ˜“å®ç°</p><p>å¹²è„†åˆ©è½çš„è½¯è¿æ¥: <code>ln -s node_modules src</code></p><p>ä¿®æ”¹ç¯å¢ƒå˜é‡: <code>NODE_PATH=. node app</code></p><p>ä»æœ¬åœ°ç›®å½•å®‰è£…:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// package.json 
</span></span></span><span style=display:flex><span><span style=color:#75715e>// éœ€è¦è¿è¡Œ npm install
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>{
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;baz&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;dependencies&#34;</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;foo&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;file: ./src&#34;</span>,
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å¦å¤–è¿˜æœ‰äº›ä¿®æ”¹ globalï¼Œæˆ–è€…å¼•å…¥å…¶ä»– require å®ç°çš„æ–¹æ³•å°±ä¸å†ä¸€ä¸€åˆ—å‡ºäº†<br>æœ€ç»ˆé€‰æ‹©çš„æ˜¯ä¿®æ”¹ webpack é…ç½®</p><pre tabindex=0><code>// webpack.config.js
resolve: {
  modulesDirectories: [__dirname, &#39;node_modules&#39;],
}
</code></pre><p><a href=https://gist.github.com/branneman/8048520>https://gist.github.com/branneman/8048520</a>
<a href=http://stackoverflow.com/questions/10860244/how-to-make-the-require-in-node-js-to-be-always-relative-to-the-root-folder-of-t/41078266#41078266>http://stackoverflow.com/questions/10860244/how-to-make-the-require-in-node-js-to-be-always-relative-to-the-root-folder-of-t/41078266#41078266</a>
<a href=https://webpack.github.io/docs/configuration.html#resolve-modulesdirectories>https://webpack.github.io/docs/configuration.html#resolve-modulesdirectories</a></p><h2><a href=/posts/leonard-cohen-you-want-it-darker/>Leonard Cohen - you want it darker</a></h2><h2 id=å¹´åº¦æœ€ä½³>å¹´åº¦æœ€ä½³</h2><p><a href=https://open.spotify.com/album/3jeTB3j3QmUs8SPIVleHtU><img src=images/you-want-it-darker.jpg alt="you want it darker"></a></p><p><a href=https://open.spotify.com/album/3jeTB3j3QmUs8SPIVleHtU>you want it darker</a></p><p>å¾ªç¯å¬äº†å¥½å‡ å¤©</p><p>å¹²å‡€ä½æ²‰çš„å—“éŸ³åŠ é…ä¹</p><p>æ„ˆå‘æ‹…å¿ƒä»¥åå¬ä¸åˆ°äº†æ€ä¹ˆåŠ ğŸ˜¢ï½</p><h2><a href=/posts/web-audio/>web audio</a></h2><p>ç…§æ–‡æ¡£æ’¸äº†ä¸€ä¸‹ AudioContext å¯è§†åŒ–éŸ³é¢‘<br>æ¡Œé¢æµè§ˆå™¨ä¸Š Safari 9, Chrome stable ç»˜åˆ¶æ­£å¸¸<br>ç§»åŠ¨ç«¯åªæœ‰å¾®ä¿¡çš„ webview èƒ½å·¥ä½œ, çº¯ç©ç¥¨å»
<img src=https://mdn.mozillademos.org/files/7977/wave.png alt=wave></p><p>ref:
<a href=https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API>https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;viewport&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;width=device-width, user-scalable=no&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>title</span>&gt;AV&lt;/<span style=color:#f92672>title</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>canvas</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vis&#34;</span>&gt;&lt;/<span style=color:#f92672>canvas</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>audio</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;av&#34;</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;YOUR_AUDIO_FILE&#34;</span>&gt;&lt;/<span style=color:#f92672>audio</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;index.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>window.<span style=color:#a6e22e>AudioContext</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>AudioContext</span> <span style=color:#f92672>||</span> window.<span style=color:#a6e22e>webkitAudioContext</span> <span style=color:#f92672>||</span> window.<span style=color:#a6e22e>mozAudioContext</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>window.<span style=color:#a6e22e>onload</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(){
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>canvas</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;vis&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>canvasCtx</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>getContext</span>(<span style=color:#e6db74>&#39;2d&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>isPlaying</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>audio</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;av&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>audioCtx</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>AudioContext</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>analyser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>audioCtx</span>.<span style=color:#a6e22e>createAnalyser</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>audioSrc</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>audioCtx</span>.<span style=color:#a6e22e>createMediaElementSource</span>(<span style=color:#a6e22e>audio</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>audioSrc</span>.<span style=color:#a6e22e>connect</span>(<span style=color:#a6e22e>analyser</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>analyser</span>.<span style=color:#a6e22e>connect</span>(<span style=color:#a6e22e>audioCtx</span>.<span style=color:#a6e22e>destination</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>analyser</span>.<span style=color:#a6e22e>fftSize</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2048</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>bufferLength</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>analyser</span>.<span style=color:#a6e22e>fftSize</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>dataArray</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Uint8Array</span>(<span style=color:#a6e22e>bufferLength</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>analyser</span>.<span style=color:#a6e22e>getByteTimeDomainData</span>(<span style=color:#a6e22e>dataArray</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>WIDTH</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>500</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>HEIGHT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>150</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>requestAnimationFrame</span>(<span style=color:#a6e22e>draw</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>isPlaying</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>analyser</span>.<span style=color:#a6e22e>getByteTimeDomainData</span>(<span style=color:#a6e22e>dataArray</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>canvasCtx</span>.<span style=color:#a6e22e>fillStyle</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;rgb(200, 200, 200)&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>canvasCtx</span>.<span style=color:#a6e22e>fillRect</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>WIDTH</span>, <span style=color:#a6e22e>HEIGHT</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>canvasCtx</span>.<span style=color:#a6e22e>lineWidth</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>canvasCtx</span>.<span style=color:#a6e22e>strokeStyle</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;rgb(0, 0, 0)&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>canvasCtx</span>.<span style=color:#a6e22e>beginPath</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>sliceWidth</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>WIDTH</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>bufferLength</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>bufferLength</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>v</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>dataArray</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>/</span> <span style=color:#ae81ff>128.0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>v</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>HEIGHT</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>canvasCtx</span>.<span style=color:#a6e22e>moveTo</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>canvasCtx</span>.<span style=color:#a6e22e>lineTo</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>x</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>sliceWidth</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>canvasCtx</span>.<span style=color:#a6e22e>lineTo</span>(<span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>canvasCtx</span>.<span style=color:#a6e22e>stroke</span>();
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>audio</span>.<span style=color:#a6e22e>play</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>onclick</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>audio</span>, <span style=color:#a6e22e>isPlaying</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isPlaying</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>audio</span>.<span style=color:#a6e22e>pause</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>isPlaying</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>audio</span>.<span style=color:#a6e22e>play</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>isPlaying</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2><a href=/posts/move-to-caddy/>move to caddy</a></h2><p>å»å¹´ç”¨ Hexo æ­å»ºçš„æ—¥å¿—å·²ç»å¥½å‡ ä¸ªæœˆæ²¡æ›´æ–°äº†ï¼Œæœ€è¿‘ä¼‘å‡æœ‰ç‚¹ç©ºé—²å°±ç»§ç»­æ›´æ–°å§ã€‚<br>å…ˆä» Github è¿ç§»å›è‡ªå·±çš„ Linodeï¼Œç„¶åå®‰è£…ä¸€ä¸ª Caddyserver<a href=https://caddyserver.com/>1</a> æ¥æ¸²æŸ“ markdown</p><blockquote><p>Caddy is a unique web server with a modern feature set. Think nginx or Apache, but written in Go. With Caddy, you can serve your websites over HTTP/2. It can act as a reverse proxy and load balancer. Front your PHP apps with it. You can even deploy your site with git push. Cool, right?<a href=https://blog.gopheracademy.com/caddy-a-look-inside/>2</a></p></blockquote><h2 id=download-and-install-systemd>Download and install systemd</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget -O <span style=color:#e6db74>&#39;caddy.tar.gz&#39;</span> <span style=color:#e6db74>&#39;https://caddyserver.com/download/build?os=linux&amp;arch=amd64&amp;features=git%2Cipfilter&#39;</span>
</span></span><span style=display:flex><span>tar zxf caddy.tar.gz
</span></span><span style=display:flex><span>mkdir /opt/caddy
</span></span><span style=display:flex><span>mkdir /var/run/caddy/
</span></span><span style=display:flex><span>chown caddy:caddy -R /opt/caddy
</span></span><span style=display:flex><span>chown caddy:caddy -R /var/run/caddy
</span></span><span style=display:flex><span>mv caddy /opt/caddy/
</span></span><span style=display:flex><span>useradd -d /var/run/caddy --system caddy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>chmod <span style=color:#ae81ff>644</span> /etc/systemd/system/caddy.service
</span></span><span style=display:flex><span>systemctl enable caddy.service
</span></span><span style=display:flex><span>systemctl start caddy.service
</span></span><span style=display:flex><span>systemctl status caddy.service
</span></span></code></pre></div><p><a href=https://github.com/caddyserver/examples/blob/master/systemd%2Fcaddy.service>https://github.com/caddyserver/examples/blob/master/systemd%2Fcaddy.service</a></p><h2><a href=/posts/mongodb-backup/>mongodb backup</a></h2><p>æœ‰å°æœºå™¨å‡†å¤‡2æœˆä»½ä¸‹æ¶
è®°ä¸€ä¸ª mongodb å¤‡ä»½å°è„šæœ¬ :)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e># vim: set et sw=2 ts=2 sts=2 ff=unix fenc=utf8:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MONGO_DATABASE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;_name_&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MONGO_HOST<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;_ip_&#34;</span>
</span></span><span style=display:flex><span>MONGO_PORT<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;_prot_&#34;</span>
</span></span><span style=display:flex><span>TIMESTAMP<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>date +%Y-%m-%dT%H:%M:%S<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>MONGODUMP_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/usr/bin/mongodump&#34;</span>
</span></span><span style=display:flex><span>BACKUPS_DIR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/data/dumps/&#34;</span>
</span></span><span style=display:flex><span>BACKUP_NAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$MONGO_DATABASE<span style=color:#e6db74>-</span>$TIMESTAMP<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> test $# -gt <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> in
</span></span><span style=display:flex><span>    -m<span style=color:#f92672>)</span> echo <span style=color:#e6db74>&#34;backup mongthly and clear week_dir&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>#rm $BACKUPS_DIR&#34;week/*&#34;</span>
</span></span><span style=display:flex><span>      find $BACKUPS_DIR<span style=color:#e6db74>&#34;week&#34;</span> -type f -name <span style=color:#e6db74>&#39;*.tgz&#39;</span> -delete
</span></span><span style=display:flex><span>      tar -czPf $BACKUPS_DIR<span style=color:#e6db74>&#34;month/&#34;</span>$BACKUP_NAME.tgz $BACKUPS_DIR$MONGO_DATABASE
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>    -w<span style=color:#f92672>)</span> echo <span style=color:#e6db74>&#34;backup weekly&#34;</span>
</span></span><span style=display:flex><span>      echo <span style=color:#e6db74>&#34;tar -czPf </span>$BACKUPS_DIR<span style=color:#e6db74>&#34;</span>week/<span style=color:#e6db74>&#34;</span>$BACKUP_NAME<span style=color:#e6db74>.tgz </span>$BACKUPS_DIR$MONGO_DATABASE<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>    -d<span style=color:#f92672>)</span> echo <span style=color:#e6db74>&#34;just dump&#34;</span>
</span></span><span style=display:flex><span>      $MONGODUMP_PATH -d $MONGO_DATABASE --out $BACKUPS_DIR
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>    *<span style=color:#f92672>)</span> echo <span style=color:#e6db74>&#34;do nothing&#34;</span>
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>esac</span>
</span></span><span style=display:flex><span>  shift
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><pre tabindex=0><code class=language-cronjob data-lang=cronjob># crontab -e
10 3 * * * /bin/bash $HOME/bin/mongobackup.sh -d &gt; /dev/null 2&gt;&amp;1
20 3 * * 1 /bin/bash $HOME/bin/mongobackup.sh -w &gt; /dev/null 2&gt;&amp;1
30 3 1 * * /bin/bash $HOME/bin/mongobackup.sh -m &gt; /dev/null 2&gt;&amp;1
</code></pre><p>æ¯å¤©æ—©ä¸Š3ç‚¹æŒ‰å¤©ï¼å‘¨ï¼æœˆåˆ†åˆ«ä¿å­˜</p><h2><a href=/posts/let-s-encrypt/>let's encrypt</a></h2><p><a href=https://letsencrypt.org>Let&rsquo;s Encrypt</a> å·²ç»å…¬å¼€æµ‹è¯•ï¼Œä¸éœ€è¦å†æäº¤æµ‹è¯•åŸŸåè¡¨å•ï¼Œç›´æ¥å°±èƒ½ç”³è¯·<br>å°é¡¹ç›®ä»¥åéƒ½èƒ½ç”¨è¿™ç©æ„å¼€ https ä¸ç”¨èŠ±é’±ä¹°è¯ä¹¦å“¦å•¦å•¦</p><p>ç…§ <a href=https://letsencrypt.readthedocs.org/en/latest/using.html>æ–‡æ¡£</a> åšä¸€éç»™åŸŸåç­¾ä¸Šè¯ä¹¦è¿˜æŒºç®€å•çš„</p><p><img src=images/ssl.jpg alt=ssl></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># è·å–é¡¹ç›®ä»£ç </span>
</span></span><span style=display:flex><span>git clone https://github.com/letsencrypt/letsencrypt
</span></span><span style=display:flex><span>cd letsencrypt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å®‰è£…ä¾èµ–</span>
</span></span><span style=display:flex><span>./letsencrypt-auto
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è·å–è¯ä¹¦</span>
</span></span><span style=display:flex><span>./letsencrypt-auto certonly --standalone -d www.example.com -d example.com
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># é…ç½® nginx</span>
</span></span><span style=display:flex><span>server <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  listen <span style=color:#ae81ff>443</span> ;
</span></span><span style=display:flex><span>  ssl on;
</span></span><span style=display:flex><span>  ssl_certificate_key /etc/letsencrypt/live/youdomain/privkey.pem;
</span></span><span style=display:flex><span>  ssl_certificate /etc/letsencrypt/live/youdomain/fullchain.pem;
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><del>éœ€è¦æ³¨æ„çš„æ˜¯ dnspod ç­‰å›½å†…æœåŠ¡è§£æåŸŸåæœ‰é—®é¢˜</del><br>æˆ‘è¿™é‡Œç›´æ¥åˆ‡å› domains.google.com å°±è¡Œäº†<br>ä½¿ç”¨ standalone æ¨¡å¼éœ€è¦å…ˆåœæ‰é»˜è®¤çš„ nginx<br>æ–‡æ¡£é‡Œæåˆ°å¯ä»¥ä½¿ç”¨ webroot æ¨¡å¼ä¸ç”¨åœ
ä½†æˆ‘åˆ›å»ºéªŒè¯æ–‡ä»¶å¤±è´¥äº† :(<br>é»˜è®¤90å¤©è¿‡æœŸï¼Œå»ºè®® crontab å®šæ—¶æ›´æ–°</p><p>###Update</p><p>ä½¿ç”¨ <a href=https://github.com/Neilpang/acme.sh>acme.sh</a></p><ul><li>An ACME protocol client written purely in Shell (Unix shell) language.</li><li>Fully ACME protocol implementation.</li><li>Simple, powerful and very easy to use. You only need 3 minutes to learn.</li><li>Bash, dash and sh compatible.</li><li>Simplest shell script for Let&rsquo;s Encrypt free certificate client.</li><li>Purely written in Shell with no dependencies on python or Let&rsquo;s Encrypt official client.</li><li>Just one script, to issue, renew and install your certificates automatically.</li></ul><p>æˆ–è€… <a href=https://caddyserver.com>caddyserver</a></p><h2><a href=/posts/simple-nodejs-crawler/>simple crawler</a></h2><p>åŠå¤œçœ‹äº†æœ¬<a href=http://www.qidian.com/Book/3313422.aspx>å°è¯´</a>è§‰å¾—ç¿»é¡µå¤ªç´¯</p><p>é¦–å…ˆè¦è§£å†³çš„é—®é¢˜æ˜¯æ‰¾ä¸€ä¸ªè´¨é‡è¿˜è¿‡å¾—å»çš„å°è¯´ç«™
ç„¶åå†™ä¸ª<a href=https://github.com/yanyaoer/crawler>è„šæœ¬</a>å»æŠŠå®ƒçˆ¬ä¸‹æ¥ç« èŠ‚åˆå¹¶åˆ°ä¸€èµ·</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>fs</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;fs&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>argv</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;process&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>request</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;request&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>cheerio</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;cheerio&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>iconv</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;iconv-lite&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>sanitize</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;sanitize-html&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>main</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>() {
</span></span><span style=display:flex><span>    Object.<span style=color:#a6e22e>assign</span>(<span style=color:#66d9ef>this</span>, {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./chapter.json&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>html</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./reader.html&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>list</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;http://www.piaotian.net/html/6/6658/&#39;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>store</span><span style=color:#f92672>:</span> []
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>url</span>, <span style=color:#a6e22e>callback</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>request</span>.<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>url</span>, {<span style=color:#a6e22e>encoding</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>}, (<span style=color:#a6e22e>error</span>, <span style=color:#a6e22e>response</span>, <span style=color:#a6e22e>body</span>)=&gt; {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>error</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>statusCode</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>200</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>$</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cheerio</span>.<span style=color:#a6e22e>load</span>(<span style=color:#a6e22e>iconv</span>.<span style=color:#a6e22e>decode</span>(<span style=color:#a6e22e>body</span>, <span style=color:#e6db74>&#39;GBK&#39;</span>));
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>callback</span>(<span style=color:#a6e22e>$</span>, <span style=color:#a6e22e>body</span>);
</span></span><span style=display:flex><span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>url</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>runchapter</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>store</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>d</span>=&gt; {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>content</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>fetch</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>url</span>.<span style=color:#a6e22e>list</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>href</span>, (<span style=color:#a6e22e>$</span>, <span style=color:#a6e22e>body</span>)=&gt; {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>content</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>iconv</span>.<span style=color:#a6e22e>decode</span>(<span style=color:#a6e22e>body</span>, <span style=color:#e6db74>&#39;GBK&#39;</span>);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>content</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sanitize</span>(<span style=color:#a6e22e>content</span>);
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>save</span>();
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;runchapter fail: &#39;</span>, <span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>title</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>output</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>output</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>//let content = this.store.slice(0, 2)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>content</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>store</span>
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>d</span>=&gt; <span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>content</span>)
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#39;&lt;hr /&gt;&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>html</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`&lt;html&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;head&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &lt;meta charset=&#34;utf8&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &lt;style&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ul, table, div {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          display: none;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        hr {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          height: 1px;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          margin: 4rem 0;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        body {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          padding: 0 20%;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          font:24px/1.5 &#39;Songti Sc&#39;;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &lt;/style&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;/head&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;body&gt;</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>content</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&lt;/body&gt;&lt;/html&gt;`</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fs</span>.<span style=color:#a6e22e>writeFileSync</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>html</span>, <span style=color:#a6e22e>html</span>, <span style=color:#e6db74>&#39;utf8&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>reload</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>fetch</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>url</span>.<span style=color:#a6e22e>list</span>, (<span style=color:#a6e22e>$</span>)=&gt; {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>store</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;.mainbody .centent ul li a&#39;</span>).<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>d</span>)=&gt; {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>el</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#a6e22e>d</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>href</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>attr</span>(<span style=color:#e6db74>&#39;href&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>href</span>.<span style=color:#a6e22e>endsWith</span>(<span style=color:#e6db74>&#39;.html&#39;</span>)) {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>store</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>href</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>text</span>() })
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>save</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>runchapter</span>();
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>config</span>(<span style=color:#a6e22e>force</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>force</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>reload</span>();
</span></span><span style=display:flex><span>    } <span style=color:#a6e22e>esle</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>text</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>fs</span>.<span style=color:#a6e22e>readFileSync</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>path</span>, <span style=color:#e6db74>&#39;utf8&#39;</span>).<span style=color:#a6e22e>toString</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>store</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>text</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>runchapter</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>save</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fs</span>.<span style=color:#a6e22e>writeFileSync</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>path</span>, <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>store</span>), <span style=color:#e6db74>&#39;utf8&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>init</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>force</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>argv</span>[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;-f&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;run: &#39;</span>, <span style=color:#a6e22e>argv</span>[<span style=color:#ae81ff>2</span>], <span style=color:#a6e22e>force</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>config</span>(<span style=color:#a6e22e>force</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>new</span> <span style=color:#a6e22e>main</span>().<span style=color:#a6e22e>init</span>();
</span></span></code></pre></div><p>äºæ˜¯å°±æ°´å‡ºæ¥ä¸€ç¯‡æ—¥å¿—å•¦</p><h2><a href=/posts/send-notification-after-task-end/>send notification when task finish</a></h2><p>ç»ˆç«¯é‡Œè¿è¡Œé•¿æ—¶é—´ä»»åŠ¡(æ¯”å¦‚ <code>make systemimage</code>)çš„æ—¶å€™ç»å¸¸ä¼šåˆ‡æ¢åˆ°å…¶ä»–ç¯å¢ƒåšåˆ«çš„äº‹æƒ…
å®¹æ˜“å¿˜è®°æŸ¥çœ‹ä¹‹å‰çš„ä»»åŠ¡æ˜¯å¦å®Œæˆ, æŸ¥åˆ°ä¸€äº›æ–¹æ³•ç”¨åœ¨ä»»åŠ¡ç»“æŸæ—¶å‘å‡ºé€šçŸ¥</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#C-z åˆ‡åˆ°åå°è¿è¡Œ</span>
</span></span><span style=display:flex><span>fg; tput bel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mac OS X</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#ç³»ç»Ÿå¼¹çª—</span>
</span></span><span style=display:flex><span>osascript -e <span style=color:#e6db74>&#39;tell app &#34;System Events&#34; to display alert &#34;Build Completed&#34; message &#34;The checkout and build have completed.&#34;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>say <span style=color:#e6db74>&#34;Job finished&#34;</span> <span style=color:#75715e>#è¯­éŸ³æ’­æŠ¥</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#notification center</span>
</span></span><span style=display:flex><span>osascript -e <span style=color:#e6db74>&#39;display notification &#34;Job finished&#34; with title &#34;Alert&#34;&#39;</span>
</span></span><span style=display:flex><span>sudo gem install terminal-notifier
</span></span><span style=display:flex><span>terminal-notifier -message <span style=color:#e6db74>&#34;Job finished!&#34;</span> -title <span style=color:#e6db74>&#34;Alert&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Ubuntu</span>
</span></span><span style=display:flex><span>notify-send <span style=color:#e6db74>&#34;Job finished!&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># KDE</span>
</span></span><span style=display:flex><span>kdialog --passivepopup <span style=color:#e6db74>&#39;Job finished&#39;</span>
</span></span></code></pre></div><p>è¿˜æœ‰ <a href=https://iterm2.com/documentation-triggers.html>iterm2 trigger</a> ä¹Ÿèƒ½ç”¨æ¥è§¦å‘é€šçŸ¥, é«˜äº®æ–‡å­—</p><h2><a href=/posts/cname-with-yanyao-com/>create CNAME with internationalized domain name</a></h2><p>å‰æ®µæ—¶é—´ä¹°äº†ä¸ª <a href=https://en.wikipedia.org/wiki/Internationalized_domain_name>idn</a>: yÃ¡nyÃ o.com é—²ç½®äº†å¾ˆé•¿æ—¶é—´æ²¡åŠ¨
è¶ç€åä¸€é•¿å‡æ— æ‰€äº‹äº‹çš„æœºä¼š, æŠŠç©äº†ä¸€ä¸‹ <a href=https://hexo.io>hexo</a> æŒ‚åˆ° yanyaoer.github.io</p><p>ç„¶å CNAME çš„æ—¶å€™æ‰å‘äº†, çœ‹åˆ°æœ‰äººè¯´30åˆ†é’Ÿç”Ÿæ•ˆå‚»å‚»ç­‰å°±ä¸æäº†
å®é™…ä¸Šè¿™ä¸ªåŸŸåçš„ CNAME å†…å®¹åº”è¯¥ç”¨ç¼–ç åçš„å­—ç¬¦ä¸²è€Œä¸æ˜¯ yÃ¡nyÃ o.com</p><p><a href=https://github.com/yanyaoer/yanyaoer.github.io/commit/7c0e4e6863904442d368e3ad5c822f8f189bb7fc#diff-adc4bfdb0829dae99e3699393e3fbaa4>https://github.com/yanyaoer/yanyaoer.github.io/commit/7c0e4e6863904442d368e3ad5c822f8f189bb7fc#diff-adc4bfdb0829dae99e3699393e3fbaa4</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>diff --git a/CNAME b/CNAME
</span></span><span style=display:flex><span>index 6cb647c..92d166c 100644
</span></span><span style=display:flex><span><span style=color:#f92672>--- a/CNAME
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+++ b/CNAME
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span><span style=color:#75715e>@@ -1 +1 @@
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>-yÃ¡nyÃ o.com
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+xn--ynyo-2nad.com
</span></span></span></code></pre></div><h2><a href=/posts/xtag-and-shadowdom/>xtag-and-shadowdom</a></h2><p>æœ€è¿‘åœ¨åšçš„é¡¹ç›®é‡æ„, åŸæœ¬æ‰“ç®—ç”¨ reactjs, å†™äº†ä¸€äº›å®éªŒä»£ç åå¿ƒç´¯æ— çˆ±
æ‰¾äº†ä¸ª domdiff é…åˆè‡ªå®šä¹‰æ ‡ç­¾å’Œ shadowdom çš„ç‹¬æœ‰ä½œç”¨åŸŸä¹Ÿæ˜¯çˆ½ YY</p><p>å¯æƒœçš„æ˜¯æµ‹è¯•çº¢ç±³ä¸Šçš„ android webview ç‰ˆæœ¬(32?)ä¸æ”¯æŒ ::shadow ä¼ªç±»
inline æ–¹å¼è¦†ç›–æ ·å¼ç•¥å«Œç¹ç</p><h2 id=ç¤ºä¾‹ä»£ç >ç¤ºä¾‹ä»£ç </h2><h3 id=xtagjs>xtag.js</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dom</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shadow</span>(<span style=color:#a6e22e>el</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>createShadowRoot</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>createShadowRoot</span>() <span style=color:#f92672>:</span> <span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>webkitCreateShadowRoot</span>();
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>attr</span>(<span style=color:#a6e22e>el</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> Object.<span style=color:#a6e22e>keys</span>(<span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>dataset</span>).<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>d</span>)=&gt; <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>prefix</span><span style=color:#e6db74>}${</span><span style=color:#a6e22e>d</span><span style=color:#e6db74>}</span><span style=color:#e6db74>=&#34;</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>dataset</span>[<span style=color:#a6e22e>d</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;`</span>).<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#39; &#39;</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>document.<span style=color:#a6e22e>registerElement</span>(<span style=color:#e6db74>&#39;x-image&#39;</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>prototype</span><span style=color:#f92672>:</span> Object.<span style=color:#a6e22e>create</span>(<span style=color:#a6e22e>HTMLElement</span>.<span style=color:#a6e22e>prototype</span>, {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>createdCallback</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>value</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>//xtag åµŒå¥—æ—¶è¿™é‡Œè¯»ä¸åˆ°attr, æ”¾åˆ° attach
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;onCreate::image&#39;</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>attachedCallback</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>value</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;onAttach::image&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>shadow</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>dom</span>.<span style=color:#a6e22e>shadow</span>(<span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>shadow</span>.<span style=color:#a6e22e>innerHTML</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`&lt;style&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            img { max-width: 100%; }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          &lt;/style&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          &lt;img </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>dom</span>.<span style=color:#a6e22e>attr</span>(<span style=color:#66d9ef>this</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74> /&gt;`</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>onclick</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>e</span>) =&gt; {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// other x-tag;
</span></span></span></code></pre></div><h3 id=indexjs>index.js</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;babel/polyfill&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;./xtag.js&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BaseView</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>opt</span>) {
</span></span><span style=display:flex><span>    Object.<span style=color:#a6e22e>assign</span>(<span style=color:#66d9ef>this</span>, {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>root</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dom</span>(<span style=color:#e6db74>&#39;#app&#39;</span>)
</span></span><span style=display:flex><span>    }, <span style=color:#a6e22e>opt</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mount</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;event::mount&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>onCreate</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;event::create&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>onUpdate</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;event::update&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BannerView</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>BaseView</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>init</span>(...<span style=color:#a6e22e>args</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>mount</span>(...<span style=color:#a6e22e>args</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>render</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>`&lt;x-image data-src=&#34;</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>src</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                     data-href=&#34;</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>redirect_url</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34; /&gt;`</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=links>links</h2><p><a href=http://www.html5rocks.com/en/tutorials/webcomponents/customelements/>http://www.html5rocks.com/en/tutorials/webcomponents/customelements/</a>
<a href=http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom-301/>http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom-301/</a></p><h2><a href=/posts/remote-pbcopy-with-netcat/>remote pbcopy with netcat</a></h2><h2 id=quick-start>Quick start</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>while</span> <span style=color:#f92672>(</span>true<span style=color:#f92672>)</span>; <span style=color:#66d9ef>do</span> nc -l <span style=color:#ae81ff>2224</span> | pbcopy; <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#If your laptop is running linux, replacing pbcopy with xcopy should work:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#while (true); do nc -l 2224 | xcopy; done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;This text gets sent to clipboard&#34;</span> | nc localhost <span style=color:#ae81ff>2224</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;RemoteForward 2224 localhost:2224&#34;</span> &gt;&gt; ~/.ssh/config
</span></span><span style=display:flex><span>ssh remote -t <span style=color:#e6db74>&#39;cat blablabla | nc -q0 localhost 2224&#39;</span>
</span></span></code></pre></div><h2 id=daemonizing-pbcopy>Daemonizing pbcopy</h2><p><code>launchctl load ~/Library/LaunchAgents/local.pbcopy.plist</code></p><pre tabindex=0><code class=language-plist data-lang=plist>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;!DOCTYPE plist PUBLIC &#34;-//Apple Computer//DTD PLIST 1.0//EN&#34; &#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd&#34;&gt;
&lt;plist version=&#34;1.0&#34;&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;localhost.pbcopy&lt;/string&gt;
    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
       &lt;string&gt;/usr/bin/pbcopy&lt;/string&gt;
    &lt;/array&gt;
    &lt;key&gt;inetdCompatibility&lt;/key&gt;
    &lt;dict&gt;
       &lt;key&gt;Wait&lt;/key&gt;
       &lt;false/&gt;
    &lt;/dict&gt;
    &lt;key&gt;Sockets&lt;/key&gt;
    &lt;dict&gt;
       &lt;key&gt;Listeners&lt;/key&gt;
       &lt;dict&gt;
           &lt;key&gt;SockServiceName&lt;/key&gt;
           &lt;string&gt;2224&lt;/string&gt;
           &lt;key&gt;SockNodeName&lt;/key&gt;
           &lt;string&gt;127.0.0.1&lt;/string&gt;
       &lt;/dict&gt;
    &lt;/dict&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</code></pre><h2 id=remote-pbcopy>Remote pbcopy</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp pbcopy remote:/path_to/pbcopy
</span></span><span style=display:flex><span>chmod a+x path_to/pbcopy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> -n <span style=color:#e6db74>&#34;</span>$SSH_CLIENT<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> SESSION_TYPE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;remote&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> $SESSION_TYPE <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;remote&#34;</span> <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  cat | nc -q0 localhost <span style=color:#ae81ff>2224</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>  cat | pbcopy
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h2 id=links>links</h2><p><a href=http://brettterpstra.com/2014/02/19/remote-pbcopy-on-os-x-systems/>http://brettterpstra.com/2014/02/19/remote-pbcopy-on-os-x-systems/</a></p><h2><a href=/posts/postfix-forward-mail/>forward email by postfix</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo aptitude install postfix
</span></span><span style=display:flex><span>hostname -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># sudo vim /etc/postfix/main.cf</span>
</span></span><span style=display:flex><span>myhostname <span style=color:#f92672>=</span> example.com
</span></span><span style=display:flex><span>myorigin <span style=color:#f92672>=</span> example.com
</span></span><span style=display:flex><span>mydestination <span style=color:#f92672>=</span> example1.com, example2.com, ...
</span></span><span style=display:flex><span>virtual_alias_maps <span style=color:#f92672>=</span> hash:/etc/postfix/virtual
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># sudo vim /etc/postfix/virtual</span>
</span></span><span style=display:flex><span>@example1.com    name@forward.com
</span></span><span style=display:flex><span>@example2.com    name@forward.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo postmap /etc/postfix/virtual
</span></span><span style=display:flex><span>sudo /etc/init.d/postfix reload
</span></span></code></pre></div><p><a href=https://wiki.debian.org/Postfix#Forward_Emails>https://wiki.debian.org/Postfix#Forward_Emails</a></p><p><a href=https://www.linode.com/docs/email/postfix/basic-postfix-email-gateway-on-debian-6-squeeze>https://www.linode.com/docs/email/postfix/basic-postfix-email-gateway-on-debian-6-squeeze</a></p><p><a href=https://www.debian-administration.org/article/243/Handling_mail_for_multiple_virtual_domains_with_postfix>https://www.debian-administration.org/article/243/Handling_mail_for_multiple_virtual_domains_with_postfix</a></p><h2><a href=/posts/mitmproxy/>mitmproxy</a></h2><p><a href=http://mitmproxy.org>mitmproxy</a> æ˜¯ä¸ªå‘½ä»¤è¡Œä¸‹æŸ¥çœ‹/ä¿®æ”¹ http è¯·æ±‚çš„äº¤äº’å¼å·¥å…·</p><p>#æˆªå›¾
<img src=http://mitmproxy.org/doc/screenshots/mitmproxy.png alt=screenshoot>
<img src=http://mitmproxy.org/doc/screenshots/mitmproxy-flowview.png alt=screenshoot></p><p>#å®‰è£…</p><pre><code>sudo apt-get install python-dev libffi-dev
pip install mitmproxy
</code></pre><p>#ä½¿ç”¨</p><p><strong>ubuntu ä¸Šå¯åŠ¨ mitmproxy</strong><br>mitmproxy &ndash;host</p><p><strong>æ‰‹æœº è®¾ç½® -> WLAN -> ä»£ç†</strong><br>ä¸»æœºå: ubuntu çš„ ip<br>ç«¯å£: 8080</p><p>ç„¶åè®¿é—®ç½‘ç»œå°±ä¼šåœ¨ mitmproxy é‡Œçœ‹åˆ°è¯·æ±‚è®°å½•(å¦‚æˆªå›¾)</p><p>#å¿«æ·é”®</p><p>j,k ä¸Šä¸‹ç§»åŠ¨<br>enter è¿›å…¥<br>tab åˆ‡æ¢ request/response</p><p>#å‚è€ƒ
<a href=http://mitmproxy.org/doc/mitmproxy.html>http://mitmproxy.org/doc/mitmproxy.html</a><br><a href=http://blog.philippheckel.com/2013/07/01/how-to-use-mitmproxy-to-read-and-modify-https-traffic-of-your-phone/>http://blog.philippheckel.com/2013/07/01/how-to-use-mitmproxy-to-read-and-modify-https-traffic-of-your-phone/</a></p><h2><a href=/posts/brick-intro/>brick intro</a></h2><p>#Introducing Brick: Minimal-markup Web Components for Faster App Development
#ä»‹ç» brick: ç”¨äºå¿«é€Ÿå¼€å‘ webapp çš„è‡ªå®šä¹‰æ ‡ç­¾ç»„ä»¶</p><p><a href=https://hacks.mozilla.org/2013/08/introducing-brick-minimal-markup-web-components-for-faster-app-development/>https://hacks.mozilla.org/2013/08/introducing-brick-minimal-markup-web-components-for-faster-app-development/</a></p><p>Those of you on the cutting HTML5 edge may have already heard of the exciting Web Components specification. If you havenâ€™t, youâ€™ll probably want to read up on what makes this so exciting, but long story short, Web Components promise to open up a new realm of development by letting web developers write custom, reusable HTML tags. Think of them as JavaScript plugins without the need for additional code initialization or boilerplate markup/styling.</p><h2><a href=/posts/my-osx-setup/>my osx setup</a></h2><p>#setting</p><pre tabindex=0><code># Enable full keyboard access for all controls
defaults write NSGlobalDomain AppleKeyboardUIMode -int 3

# Disable menu bar transparency
defaults write NSGlobalDomain AppleEnableMenuBarTransparency -bool false

# Allow quitting Finder via âŒ˜ + Q; doing so will also hide desktop icons
defaults write com.apple.finder QuitMenuItem -bool true

# Avoid creating .DS_Store files on network volumes
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true

# Disable the warning when changing a file extension
defaults write com.apple.finder FXEnableExtensionChangeWarning -bool false

# Enable tap to click (Trackpad)
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true

# Enable Safariâ€™s debug menu
defaults write com.apple.Safari IncludeInternalDebugMenu -bool true

# To pin the dock to the right bottom
defaults write com.apple.dock pinning -string end
defaults write com.apple.dock orientation -string right

# Only Show Open Applications In The Dock
defaults write com.apple.dock static-only -bool true

defaults write com.apple.dock tilesize -int 24
defaults write com.apple.finder QLEnableTextSelection -bool true

# disable dashboard
defaults write com.apple.dashboard mcx-disabled -boolean true
</code></pre><p>#<a href=http://itunes.apple.com/us/app/xcode/>xcode</a> with <a href=https://developer.apple.com/downloads>Command Line Tools</a></p></main><footer><p>Copyright 2025. All rights reserved.</p></footer></body></html>