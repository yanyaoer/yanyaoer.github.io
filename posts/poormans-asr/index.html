<!doctype html><html lang=en-US><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=#ZgotmplZ><title>poorman's ASR solution | yÃ¡nyÃ o.com</title>
<meta name=title content="poorman's ASR solution"><meta name=description content='Intro
å¤§æ¦‚20å¹´h2æœŸé—´ï¼Œå¬é—»feishuæ”¯æŒäº†ä¼šè®®è‡ªåŠ¨è½¬è¯‘å­—å¹•åŠŸèƒ½ï¼Œbut
å½“æ—¶ç§æœ‰åŒ–éƒ¨ç½²çš„ç‰ˆæœ¬ä¸€ç›´æ²¡æœ‰æ”¯æŒï¼Œäºæ˜¯ç§ä¸‹æ‰¾äº†è¯­éŸ³åŠ©æ‰‹å›¢é˜Ÿçš„åŒå­¦ä¼å›¾è¹­æœåŠ¡ç”¨äºè‡ªåŠ¨ç”Ÿæˆä¼šè®®çºªè¦ï¼Œæ‡’å³æ˜¯åŸåŠ¨åŠ›
å† but ä¸€ä¸‹ï¼Œå¤„äºæœåŠ¡æˆæœ¬è€ƒé‡æ²¡æœ‰è¹­æˆåŠŸï¼Œåæ¥å¯¹åº”çš„åŒå­¦ä¹Ÿé™†ç»­ç¦»èŒå°±æ²¡ä¸‹æ–‡äº†
23å¹´å¤§æ¨¡å‹å¼€å§‹å„ç§ç«çƒ­èµ·æ¥ï¼Œäºæ˜¯å€ŸåŠ© openai çš„ whisper
åœ¨æœ¬åœ°é™†ç»­å†™äº†ä¸€äº›éŸ³é¢‘è½¬æ–‡æœ¬çš„å°ä»»åŠ¡ï¼Œæ¯”å¦‚ yt-dlp ä¸‹è½½ bilibili
è§†é¢‘åè½¬éŸ³é¢‘å†è½¬æ–‡æœ¬ï¼Œä¸ªäººä¹ æƒ¯ä¸Šé˜…è¯»çš„æ•ˆç‡è¿˜æ˜¯é«˜äºè§†é¢‘å½¢å¼çš„
å¦å¤–ç»“åˆè¯­éŸ³è¯†åˆ«å’Œ LLM çš„å‘æ•£ï¼Œä¹Ÿè¯•ç€æ“äº†ç‚¹è¯­éŸ³åŠ©æ‰‹çš„å°è¯•
ä½†æ˜¯å®æ—¶è¯­éŸ³è¯†åˆ«åœºæ™¯ï¼Œç”¨ whiper-stream / sense-voice
è¿™ç±»æ–¹æ¡ˆè¿˜æ˜¯ä¼šæœ‰è¯†åˆ«ä¸å‡†ç¡®ã€å†…å®¹ä¸¢å¤±çš„é—®é¢˜å­˜åœ¨ï¼Œè°ƒæ•´ step/length
å‚æ•°æ•ˆæœä¹Ÿä¸æ˜æ˜¾ï¼Œvad æ–¹æ¡ˆå»¶è¿Ÿä¹Ÿå¾ˆé«˜&mldr;
New solution
ä¸Šå‘¨å¿½ç„¶æƒ³èµ·äº† kaldi é¡¹ç›®ä¹Ÿè›®ç»å…¸äº†ï¼Œäºæ˜¯å°±è¯•ç€ç”¨ sherpa-ncnn/onnx å°è¯•äº†ä¸‹ demo
sherpa-[ncnn|onnx]-microphone
æµå¼è¯†åˆ«è¾“å‡ºçš„æ•´ä½“æ•ˆæœå·²ç»å¾ˆæ¥è¿‘æŠŠéŸ³é¢‘æ–‡ä»¶å–‚ç»™å¤§æ¨¡å‹çš„è´¨é‡
äºæ˜¯è”ç³»ç»´æŠ¤è€… @csukuangfj
è¯·æ•™æ€ä¹ˆæå‡è¯†åˆ«å‡†ç¡®ç‡ï¼Œå¤§ä½¬è¿‡äºå·å‘¨æœ«è¿˜ç»™é€ äº†æ–°æ–¹æ¡ˆå’Œè¾“å‡ºä¼˜åŒ–ï¼Œç”šè‡³è¿˜å½•äº† b
ç«™è§†é¢‘ https://www.bilibili.com/video/BV1xcEMz8EsX/

å¦å¤–ä¹Ÿä½“éªŒåˆ° two-pass åŒæ¨¡å‹è¯†åˆ«çš„æ•ˆæœï¼Œä¸¤ç§æ–¹å¼éƒ½èƒ½æ»¡è¶³ä¿ºçš„ä½¿ç”¨åœºæ™¯ğŸ‰
åœ¨å¤§ä½¬çš„åŸºç¡€ç¤ºä¾‹ä¸Šï¼Œç®€å•è¡¥å……ç‚¹å†…å®¹çš„ä¿å­˜
          result = result.lower().strip()
          display.update_text(result)
+          log(result)
          display.finalize_current_sentence()
          display.display()
        else:
          sample_buffers = []

        first_recognizer.reset(stream)


+ def log(result):
+   global file_handler
+   file_handler.write(f"{datetime.now().strftime(&#39;%Y-%m-%d %H:%M:%S&#39;)} - {result}\n")
+   file_handler.flush()


if __name__ == "__main__":
+  from datetime import datetime
+
+  ts = datetime.now().strftime("%y%m%d%H%M%S")
+  file_path = Path(f"~/Desktop/asr/2pass.{ts}.txt").expanduser()
+  file_handler = open(file_path, "a")
  try:
    main()
  except KeyboardInterrupt:
    print("\nCaught Ctrl + C. Exiting")
+  finally:
+    file_handler.close()
'><meta name=keywords content><meta property="og:url" content="https://xn--ynyo-2nad.com/posts/poormans-asr/"><meta property="og:site_name" content="yÃ¡nyÃ o.com"><meta property="og:title" content="poorman's ASR solution"><meta property="og:description" content='Intro å¤§æ¦‚20å¹´h2æœŸé—´ï¼Œå¬é—»feishuæ”¯æŒäº†ä¼šè®®è‡ªåŠ¨è½¬è¯‘å­—å¹•åŠŸèƒ½ï¼Œbut å½“æ—¶ç§æœ‰åŒ–éƒ¨ç½²çš„ç‰ˆæœ¬ä¸€ç›´æ²¡æœ‰æ”¯æŒï¼Œäºæ˜¯ç§ä¸‹æ‰¾äº†è¯­éŸ³åŠ©æ‰‹å›¢é˜Ÿçš„åŒå­¦ä¼å›¾è¹­æœåŠ¡ç”¨äºè‡ªåŠ¨ç”Ÿæˆä¼šè®®çºªè¦ï¼Œæ‡’å³æ˜¯åŸåŠ¨åŠ› å† but ä¸€ä¸‹ï¼Œå¤„äºæœåŠ¡æˆæœ¬è€ƒé‡æ²¡æœ‰è¹­æˆåŠŸï¼Œåæ¥å¯¹åº”çš„åŒå­¦ä¹Ÿé™†ç»­ç¦»èŒå°±æ²¡ä¸‹æ–‡äº†
23å¹´å¤§æ¨¡å‹å¼€å§‹å„ç§ç«çƒ­èµ·æ¥ï¼Œäºæ˜¯å€ŸåŠ© openai çš„ whisper åœ¨æœ¬åœ°é™†ç»­å†™äº†ä¸€äº›éŸ³é¢‘è½¬æ–‡æœ¬çš„å°ä»»åŠ¡ï¼Œæ¯”å¦‚ yt-dlp ä¸‹è½½ bilibili è§†é¢‘åè½¬éŸ³é¢‘å†è½¬æ–‡æœ¬ï¼Œä¸ªäººä¹ æƒ¯ä¸Šé˜…è¯»çš„æ•ˆç‡è¿˜æ˜¯é«˜äºè§†é¢‘å½¢å¼çš„
å¦å¤–ç»“åˆè¯­éŸ³è¯†åˆ«å’Œ LLM çš„å‘æ•£ï¼Œä¹Ÿè¯•ç€æ“äº†ç‚¹è¯­éŸ³åŠ©æ‰‹çš„å°è¯•
ä½†æ˜¯å®æ—¶è¯­éŸ³è¯†åˆ«åœºæ™¯ï¼Œç”¨ whiper-stream / sense-voice è¿™ç±»æ–¹æ¡ˆè¿˜æ˜¯ä¼šæœ‰è¯†åˆ«ä¸å‡†ç¡®ã€å†…å®¹ä¸¢å¤±çš„é—®é¢˜å­˜åœ¨ï¼Œè°ƒæ•´ step/length å‚æ•°æ•ˆæœä¹Ÿä¸æ˜æ˜¾ï¼Œvad æ–¹æ¡ˆå»¶è¿Ÿä¹Ÿå¾ˆé«˜â€¦
New solution ä¸Šå‘¨å¿½ç„¶æƒ³èµ·äº† kaldi é¡¹ç›®ä¹Ÿè›®ç»å…¸äº†ï¼Œäºæ˜¯å°±è¯•ç€ç”¨ sherpa-ncnn/onnx å°è¯•äº†ä¸‹ demo sherpa-[ncnn|onnx]-microphone æµå¼è¯†åˆ«è¾“å‡ºçš„æ•´ä½“æ•ˆæœå·²ç»å¾ˆæ¥è¿‘æŠŠéŸ³é¢‘æ–‡ä»¶å–‚ç»™å¤§æ¨¡å‹çš„è´¨é‡
äºæ˜¯è”ç³»ç»´æŠ¤è€… @csukuangfj è¯·æ•™æ€ä¹ˆæå‡è¯†åˆ«å‡†ç¡®ç‡ï¼Œå¤§ä½¬è¿‡äºå·å‘¨æœ«è¿˜ç»™é€ äº†æ–°æ–¹æ¡ˆå’Œè¾“å‡ºä¼˜åŒ–ï¼Œç”šè‡³è¿˜å½•äº† b ç«™è§†é¢‘ https://www.bilibili.com/video/BV1xcEMz8EsX/
å¦å¤–ä¹Ÿä½“éªŒåˆ° two-pass åŒæ¨¡å‹è¯†åˆ«çš„æ•ˆæœï¼Œä¸¤ç§æ–¹å¼éƒ½èƒ½æ»¡è¶³ä¿ºçš„ä½¿ç”¨åœºæ™¯ğŸ‰
åœ¨å¤§ä½¬çš„åŸºç¡€ç¤ºä¾‹ä¸Šï¼Œç®€å•è¡¥å……ç‚¹å†…å®¹çš„ä¿å­˜
result = result.lower().strip() display.update_text(result) + log(result) display.finalize_current_sentence() display.display() else: sample_buffers = [] first_recognizer.reset(stream) + def log(result): + global file_handler + file_handler.write(f"{datetime.now().strftime(&#39;%Y-%m-%d %H:%M:%S&#39;)} - {result}\n") + file_handler.flush() if __name__ == "__main__": + from datetime import datetime + + ts = datetime.now().strftime("%y%m%d%H%M%S") + file_path = Path(f"~/Desktop/asr/2pass.{ts}.txt").expanduser() + file_handler = open(file_path, "a") try: main() except KeyboardInterrupt: print("\nCaught Ctrl + C. Exiting") + finally: + file_handler.close()'><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-11T17:50:56+08:00"><meta property="article:modified_time" content="2025-05-11T17:50:56+08:00"><meta property="og:image" content="https://xn--ynyo-2nad.com/images/share.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xn--ynyo-2nad.com/images/share.png"><meta name=twitter:title content="poorman's ASR solution"><meta name=twitter:description content='Intro å¤§æ¦‚20å¹´h2æœŸé—´ï¼Œå¬é—»feishuæ”¯æŒäº†ä¼šè®®è‡ªåŠ¨è½¬è¯‘å­—å¹•åŠŸèƒ½ï¼Œbut å½“æ—¶ç§æœ‰åŒ–éƒ¨ç½²çš„ç‰ˆæœ¬ä¸€ç›´æ²¡æœ‰æ”¯æŒï¼Œäºæ˜¯ç§ä¸‹æ‰¾äº†è¯­éŸ³åŠ©æ‰‹å›¢é˜Ÿçš„åŒå­¦ä¼å›¾è¹­æœåŠ¡ç”¨äºè‡ªåŠ¨ç”Ÿæˆä¼šè®®çºªè¦ï¼Œæ‡’å³æ˜¯åŸåŠ¨åŠ› å† but ä¸€ä¸‹ï¼Œå¤„äºæœåŠ¡æˆæœ¬è€ƒé‡æ²¡æœ‰è¹­æˆåŠŸï¼Œåæ¥å¯¹åº”çš„åŒå­¦ä¹Ÿé™†ç»­ç¦»èŒå°±æ²¡ä¸‹æ–‡äº†
23å¹´å¤§æ¨¡å‹å¼€å§‹å„ç§ç«çƒ­èµ·æ¥ï¼Œäºæ˜¯å€ŸåŠ© openai çš„ whisper åœ¨æœ¬åœ°é™†ç»­å†™äº†ä¸€äº›éŸ³é¢‘è½¬æ–‡æœ¬çš„å°ä»»åŠ¡ï¼Œæ¯”å¦‚ yt-dlp ä¸‹è½½ bilibili è§†é¢‘åè½¬éŸ³é¢‘å†è½¬æ–‡æœ¬ï¼Œä¸ªäººä¹ æƒ¯ä¸Šé˜…è¯»çš„æ•ˆç‡è¿˜æ˜¯é«˜äºè§†é¢‘å½¢å¼çš„
å¦å¤–ç»“åˆè¯­éŸ³è¯†åˆ«å’Œ LLM çš„å‘æ•£ï¼Œä¹Ÿè¯•ç€æ“äº†ç‚¹è¯­éŸ³åŠ©æ‰‹çš„å°è¯•
ä½†æ˜¯å®æ—¶è¯­éŸ³è¯†åˆ«åœºæ™¯ï¼Œç”¨ whiper-stream / sense-voice è¿™ç±»æ–¹æ¡ˆè¿˜æ˜¯ä¼šæœ‰è¯†åˆ«ä¸å‡†ç¡®ã€å†…å®¹ä¸¢å¤±çš„é—®é¢˜å­˜åœ¨ï¼Œè°ƒæ•´ step/length å‚æ•°æ•ˆæœä¹Ÿä¸æ˜æ˜¾ï¼Œvad æ–¹æ¡ˆå»¶è¿Ÿä¹Ÿå¾ˆé«˜â€¦
New solution ä¸Šå‘¨å¿½ç„¶æƒ³èµ·äº† kaldi é¡¹ç›®ä¹Ÿè›®ç»å…¸äº†ï¼Œäºæ˜¯å°±è¯•ç€ç”¨ sherpa-ncnn/onnx å°è¯•äº†ä¸‹ demo sherpa-[ncnn|onnx]-microphone æµå¼è¯†åˆ«è¾“å‡ºçš„æ•´ä½“æ•ˆæœå·²ç»å¾ˆæ¥è¿‘æŠŠéŸ³é¢‘æ–‡ä»¶å–‚ç»™å¤§æ¨¡å‹çš„è´¨é‡
äºæ˜¯è”ç³»ç»´æŠ¤è€… @csukuangfj è¯·æ•™æ€ä¹ˆæå‡è¯†åˆ«å‡†ç¡®ç‡ï¼Œå¤§ä½¬è¿‡äºå·å‘¨æœ«è¿˜ç»™é€ äº†æ–°æ–¹æ¡ˆå’Œè¾“å‡ºä¼˜åŒ–ï¼Œç”šè‡³è¿˜å½•äº† b ç«™è§†é¢‘ https://www.bilibili.com/video/BV1xcEMz8EsX/
å¦å¤–ä¹Ÿä½“éªŒåˆ° two-pass åŒæ¨¡å‹è¯†åˆ«çš„æ•ˆæœï¼Œä¸¤ç§æ–¹å¼éƒ½èƒ½æ»¡è¶³ä¿ºçš„ä½¿ç”¨åœºæ™¯ğŸ‰
åœ¨å¤§ä½¬çš„åŸºç¡€ç¤ºä¾‹ä¸Šï¼Œç®€å•è¡¥å……ç‚¹å†…å®¹çš„ä¿å­˜
result = result.lower().strip() display.update_text(result) + log(result) display.finalize_current_sentence() display.display() else: sample_buffers = [] first_recognizer.reset(stream) + def log(result): + global file_handler + file_handler.write(f"{datetime.now().strftime(&#39;%Y-%m-%d %H:%M:%S&#39;)} - {result}\n") + file_handler.flush() if __name__ == "__main__": + from datetime import datetime + + ts = datetime.now().strftime("%y%m%d%H%M%S") + file_path = Path(f"~/Desktop/asr/2pass.{ts}.txt").expanduser() + file_handler = open(file_path, "a") try: main() except KeyboardInterrupt: print("\nCaught Ctrl + C. Exiting") + finally: + file_handler.close()'><meta itemprop=name content="poorman's ASR solution"><meta itemprop=description content='Intro å¤§æ¦‚20å¹´h2æœŸé—´ï¼Œå¬é—»feishuæ”¯æŒäº†ä¼šè®®è‡ªåŠ¨è½¬è¯‘å­—å¹•åŠŸèƒ½ï¼Œbut å½“æ—¶ç§æœ‰åŒ–éƒ¨ç½²çš„ç‰ˆæœ¬ä¸€ç›´æ²¡æœ‰æ”¯æŒï¼Œäºæ˜¯ç§ä¸‹æ‰¾äº†è¯­éŸ³åŠ©æ‰‹å›¢é˜Ÿçš„åŒå­¦ä¼å›¾è¹­æœåŠ¡ç”¨äºè‡ªåŠ¨ç”Ÿæˆä¼šè®®çºªè¦ï¼Œæ‡’å³æ˜¯åŸåŠ¨åŠ› å† but ä¸€ä¸‹ï¼Œå¤„äºæœåŠ¡æˆæœ¬è€ƒé‡æ²¡æœ‰è¹­æˆåŠŸï¼Œåæ¥å¯¹åº”çš„åŒå­¦ä¹Ÿé™†ç»­ç¦»èŒå°±æ²¡ä¸‹æ–‡äº†
23å¹´å¤§æ¨¡å‹å¼€å§‹å„ç§ç«çƒ­èµ·æ¥ï¼Œäºæ˜¯å€ŸåŠ© openai çš„ whisper åœ¨æœ¬åœ°é™†ç»­å†™äº†ä¸€äº›éŸ³é¢‘è½¬æ–‡æœ¬çš„å°ä»»åŠ¡ï¼Œæ¯”å¦‚ yt-dlp ä¸‹è½½ bilibili è§†é¢‘åè½¬éŸ³é¢‘å†è½¬æ–‡æœ¬ï¼Œä¸ªäººä¹ æƒ¯ä¸Šé˜…è¯»çš„æ•ˆç‡è¿˜æ˜¯é«˜äºè§†é¢‘å½¢å¼çš„
å¦å¤–ç»“åˆè¯­éŸ³è¯†åˆ«å’Œ LLM çš„å‘æ•£ï¼Œä¹Ÿè¯•ç€æ“äº†ç‚¹è¯­éŸ³åŠ©æ‰‹çš„å°è¯•
ä½†æ˜¯å®æ—¶è¯­éŸ³è¯†åˆ«åœºæ™¯ï¼Œç”¨ whiper-stream / sense-voice è¿™ç±»æ–¹æ¡ˆè¿˜æ˜¯ä¼šæœ‰è¯†åˆ«ä¸å‡†ç¡®ã€å†…å®¹ä¸¢å¤±çš„é—®é¢˜å­˜åœ¨ï¼Œè°ƒæ•´ step/length å‚æ•°æ•ˆæœä¹Ÿä¸æ˜æ˜¾ï¼Œvad æ–¹æ¡ˆå»¶è¿Ÿä¹Ÿå¾ˆé«˜â€¦
New solution ä¸Šå‘¨å¿½ç„¶æƒ³èµ·äº† kaldi é¡¹ç›®ä¹Ÿè›®ç»å…¸äº†ï¼Œäºæ˜¯å°±è¯•ç€ç”¨ sherpa-ncnn/onnx å°è¯•äº†ä¸‹ demo sherpa-[ncnn|onnx]-microphone æµå¼è¯†åˆ«è¾“å‡ºçš„æ•´ä½“æ•ˆæœå·²ç»å¾ˆæ¥è¿‘æŠŠéŸ³é¢‘æ–‡ä»¶å–‚ç»™å¤§æ¨¡å‹çš„è´¨é‡
äºæ˜¯è”ç³»ç»´æŠ¤è€… @csukuangfj è¯·æ•™æ€ä¹ˆæå‡è¯†åˆ«å‡†ç¡®ç‡ï¼Œå¤§ä½¬è¿‡äºå·å‘¨æœ«è¿˜ç»™é€ äº†æ–°æ–¹æ¡ˆå’Œè¾“å‡ºä¼˜åŒ–ï¼Œç”šè‡³è¿˜å½•äº† b ç«™è§†é¢‘ https://www.bilibili.com/video/BV1xcEMz8EsX/
å¦å¤–ä¹Ÿä½“éªŒåˆ° two-pass åŒæ¨¡å‹è¯†åˆ«çš„æ•ˆæœï¼Œä¸¤ç§æ–¹å¼éƒ½èƒ½æ»¡è¶³ä¿ºçš„ä½¿ç”¨åœºæ™¯ğŸ‰
åœ¨å¤§ä½¬çš„åŸºç¡€ç¤ºä¾‹ä¸Šï¼Œç®€å•è¡¥å……ç‚¹å†…å®¹çš„ä¿å­˜
result = result.lower().strip() display.update_text(result) + log(result) display.finalize_current_sentence() display.display() else: sample_buffers = [] first_recognizer.reset(stream) + def log(result): + global file_handler + file_handler.write(f"{datetime.now().strftime(&#39;%Y-%m-%d %H:%M:%S&#39;)} - {result}\n") + file_handler.flush() if __name__ == "__main__": + from datetime import datetime + + ts = datetime.now().strftime("%y%m%d%H%M%S") + file_path = Path(f"~/Desktop/asr/2pass.{ts}.txt").expanduser() + file_handler = open(file_path, "a") try: main() except KeyboardInterrupt: print("\nCaught Ctrl + C. Exiting") + finally: + file_handler.close()'><meta itemprop=datePublished content="2025-05-11T17:50:56+08:00"><meta itemprop=dateModified content="2025-05-11T17:50:56+08:00"><meta itemprop=wordCount content="108"><meta itemprop=image content="https://xn--ynyo-2nad.com/images/share.png"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fff;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--code-background-color:#f2f2f2;--code-color:#222;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#01242e;--heading-color:#eee;--text-color:#ddd;--link-color:#8cc2dd;--visited-color:#8b6fcb;--code-background-color:#000;--code-color:#ddd;--blockquote-color:#ccc}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px}blockquote{border-left:1px solid #999;color:var(--code-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{padding:1px 15px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>yÃ¡nyÃ o.com</h2></a><nav><a href=/>Home</a>
<a href=/posts>Posts</a>
<a href=/index.xml>RSS</a></nav></header><main><content><h2 id=intro>Intro</h2><p>å¤§æ¦‚20å¹´h2æœŸé—´ï¼Œå¬é—»feishuæ”¯æŒäº†ä¼šè®®è‡ªåŠ¨è½¬è¯‘å­—å¹•åŠŸèƒ½ï¼Œbut
å½“æ—¶ç§æœ‰åŒ–éƒ¨ç½²çš„ç‰ˆæœ¬ä¸€ç›´æ²¡æœ‰æ”¯æŒï¼Œäºæ˜¯ç§ä¸‹æ‰¾äº†è¯­éŸ³åŠ©æ‰‹å›¢é˜Ÿçš„åŒå­¦ä¼å›¾è¹­æœåŠ¡ç”¨äºè‡ªåŠ¨ç”Ÿæˆä¼šè®®çºªè¦ï¼Œ<strong>æ‡’å³æ˜¯åŸåŠ¨åŠ›</strong>
å† but ä¸€ä¸‹ï¼Œå¤„äºæœåŠ¡æˆæœ¬è€ƒé‡æ²¡æœ‰è¹­æˆåŠŸï¼Œåæ¥å¯¹åº”çš„åŒå­¦ä¹Ÿé™†ç»­ç¦»èŒå°±æ²¡ä¸‹æ–‡äº†</p><p>23å¹´å¤§æ¨¡å‹å¼€å§‹å„ç§ç«çƒ­èµ·æ¥ï¼Œäºæ˜¯å€ŸåŠ© openai çš„ whisper
åœ¨æœ¬åœ°é™†ç»­å†™äº†ä¸€äº›éŸ³é¢‘è½¬æ–‡æœ¬çš„å°ä»»åŠ¡ï¼Œæ¯”å¦‚ yt-dlp ä¸‹è½½ bilibili
è§†é¢‘åè½¬éŸ³é¢‘å†è½¬æ–‡æœ¬ï¼Œä¸ªäººä¹ æƒ¯ä¸Šé˜…è¯»çš„æ•ˆç‡è¿˜æ˜¯é«˜äºè§†é¢‘å½¢å¼çš„</p><p>å¦å¤–ç»“åˆè¯­éŸ³è¯†åˆ«å’Œ LLM çš„å‘æ•£ï¼Œä¹Ÿè¯•ç€æ“äº†ç‚¹è¯­éŸ³åŠ©æ‰‹çš„å°è¯•</p><p>ä½†æ˜¯å®æ—¶è¯­éŸ³è¯†åˆ«åœºæ™¯ï¼Œç”¨ whiper-stream / sense-voice
è¿™ç±»æ–¹æ¡ˆè¿˜æ˜¯ä¼šæœ‰è¯†åˆ«ä¸å‡†ç¡®ã€å†…å®¹ä¸¢å¤±çš„é—®é¢˜å­˜åœ¨ï¼Œè°ƒæ•´ step/length
å‚æ•°æ•ˆæœä¹Ÿä¸æ˜æ˜¾ï¼Œvad æ–¹æ¡ˆå»¶è¿Ÿä¹Ÿå¾ˆé«˜&mldr;</p><h2 id=new-solution>New solution</h2><p>ä¸Šå‘¨å¿½ç„¶æƒ³èµ·äº† kaldi é¡¹ç›®ä¹Ÿè›®ç»å…¸äº†ï¼Œäºæ˜¯å°±è¯•ç€ç”¨ sherpa-ncnn/onnx å°è¯•äº†ä¸‹ demo
sherpa-[ncnn|onnx]-microphone
æµå¼è¯†åˆ«è¾“å‡ºçš„æ•´ä½“æ•ˆæœå·²ç»å¾ˆæ¥è¿‘æŠŠéŸ³é¢‘æ–‡ä»¶å–‚ç»™å¤§æ¨¡å‹çš„è´¨é‡</p><p>äºæ˜¯è”ç³»ç»´æŠ¤è€… @csukuangfj
è¯·æ•™æ€ä¹ˆæå‡è¯†åˆ«å‡†ç¡®ç‡ï¼Œå¤§ä½¬è¿‡äºå·å‘¨æœ«è¿˜ç»™é€ äº†æ–°æ–¹æ¡ˆå’Œè¾“å‡ºä¼˜åŒ–ï¼Œç”šè‡³è¿˜å½•äº† b
ç«™è§†é¢‘ <a href=https://www.bilibili.com/video/BV1xcEMz8EsX/>https://www.bilibili.com/video/BV1xcEMz8EsX/</a></p><p>å¦å¤–ä¹Ÿä½“éªŒåˆ° two-pass åŒæ¨¡å‹è¯†åˆ«çš„æ•ˆæœï¼Œä¸¤ç§æ–¹å¼éƒ½èƒ½æ»¡è¶³ä¿ºçš„ä½¿ç”¨åœºæ™¯ğŸ‰</p><p>åœ¨å¤§ä½¬çš„åŸºç¡€ç¤ºä¾‹ä¸Šï¼Œç®€å•è¡¥å……ç‚¹å†…å®¹çš„ä¿å­˜</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>          result = result.lower().strip()
</span></span><span style=display:flex><span>          display.update_text(result)
</span></span><span style=display:flex><span><span style=color:#a6e22e>+          log(result)
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>          display.finalize_current_sentence()
</span></span><span style=display:flex><span>          display.display()
</span></span><span style=display:flex><span>        else:
</span></span><span style=display:flex><span>          sample_buffers = []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        first_recognizer.reset(stream)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>+ def log(result):
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+   global file_handler
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+   file_handler.write(f&#34;{datetime.now().strftime(&#39;%Y-%m-%d %H:%M:%S&#39;)} - {result}\n&#34;)
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+   file_handler.flush()
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>if __name__ == &#34;__main__&#34;:
</span></span><span style=display:flex><span><span style=color:#a6e22e>+  from datetime import datetime
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+  ts = datetime.now().strftime(&#34;%y%m%d%H%M%S&#34;)
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+  file_path = Path(f&#34;~/Desktop/asr/2pass.{ts}.txt&#34;).expanduser()
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+  file_handler = open(file_path, &#34;a&#34;)
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>  try:
</span></span><span style=display:flex><span>    main()
</span></span><span style=display:flex><span>  except KeyboardInterrupt:
</span></span><span style=display:flex><span>    print(&#34;\nCaught Ctrl + C. Exiting&#34;)
</span></span><span style=display:flex><span><span style=color:#a6e22e>+  finally:
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    file_handler.close()
</span></span></span></code></pre></div></content><p></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a></footer></body></html>