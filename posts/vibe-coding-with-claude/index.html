<!doctype html><html lang=en-US dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>vibe coding with Claude | yányào.com</title><link rel=stylesheet href=/css/main.min.6f828ddf68bbacf732eaa73b52e82f5d9de0e36e874ab957dc8b22dac66d9fa7.css integrity="sha256-b4KN32i7rPcy6qc7UugvXZ3g426HSrlX3Isi2sZtn6c=" crossorigin=anonymous></head><body><header><header><a href=https://xn--ynyo-2nad.com/ class=title><h2>yányào.com</h2></a><nav><a href=/>Home</a>
<a href=/posts>Posts</a>
<a href=/index.xml>RSS</a></nav></header><main><h1>vibe coding with Claude</h1><time datetime=2025-08-03T17:28:00+08:00>August 3, 2025</time><h2 id=abstract>Abstract</h2><ul><li>项目探索: 熟悉陌生项目，节省摸索时间，减轻其他研发的负担</li><li>方案设计: 搜索代码库，提出实现方案，帮助理清思路提供决策参考</li><li>Debug和自动化: 分析日志，快速定位问题跑通测试，自行调用终端工具</li><li>开发效率：快速构建功能原型并迭代创意，避免过早陷入细节</li><li>编码重构: 生成单元测试、优化代码、语法检查和 linting，<strong>代码质量有保障</strong></li></ul><p><img src=/images/2025-08-03-17-02-22.png alt></p><ul><li>Claude Code 概述 - Anthropic</li><li><a href=https://www.anthropic.com/claude-code>https://www.anthropic.com/claude-code</a></li></ul><h2 id=sample-project>Sample Project</h2><ul><li>dab.rs - <a href=https://github.com/yanyaoer/dab.rs>https://github.com/yanyaoer/dab.rs</a>
A Unix-style command-line music player built with Rust, featuring streaming playback, local caching, and a terminal user interface inspired by cmus</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>┌─ DAB Music Player ───────────────────────────────────────────────────────┐
</span></span><span style=display:flex><span>│ ▶ Anthrax - Madhouse: The Very Best Of Anthrax - Madhouse  [02:25/04:17] │
</span></span><span style=display:flex><span>├──────────────────────────────────────────────────────────────────────────┤
</span></span><span style=display:flex><span>│ Favorite Albums (16) │ Enter: Play │ l: Album │ h: Discography │ a: Add  │
</span></span><span style=display:flex><span>├──────────────────────────────────────────────────────────────────────────┤
</span></span><span style=display:flex><span>│ Anthrax - Madhouse: The Very Best Of Anthrax                             │
</span></span><span style=display:flex><span>│ Megadeth - Rust In Peace (Unknown year)                                  │
</span></span><span style=display:flex><span>│ Jacqueline du Pré - The Heart of the Cello (Unknown year)                │
</span></span><span style=display:flex><span>│ Antonio Vivaldi - Great Composers - Vivaldi (Unknown year)               │
</span></span><span style=display:flex><span>│ Pantera - Cowboys From Hell (2010-04-17)                                 │
</span></span><span style=display:flex><span>│ Judas Priest - Painkiller (1990-08-01)                                   │
</span></span><span style=display:flex><span>│ Arch Enemy - Deceivers (2022-08-12)                                      │
</span></span><span style=display:flex><span>│ My Dying Bride - 34.788%... Complete (1998-01-01)                        │
</span></span><span style=display:flex><span>│ Amon Amarth - The Great Heathen Army (2022-08-05)                        │
</span></span><span style=display:flex><span>└──────────────────────────────────────────────────────────────────────────┘
</span></span></code></pre></div><p><img src=/images/2025-08-03-17-09-39.png alt></p><h2 id=virtualcost-200usd><strong>VirtualCost: 200USD</strong></h2><ul><li>2 days development</li><li>39 commits</li><li>+41899 : -8180</li></ul><h2 id=best-practices>Best practices</h2><ul><li><a href=https://www.anthropic.com/engineering/claude-code-best-practices>https://www.anthropic.com/engineering/claude-code-best-practices</a></li><li><a href=https://www.bilibili.com/video/BV1EqhJzmEqE/>Technical Staff 最佳实践 | Code w/ Claude</a></li><li><a href=https://baoyu.io/blog/claude-code-best-practices-video-transcription>Claude Code 最佳实践视频文稿</a></li><li><a href=https://gist.github.com/SamPeng87/bcd420be34f84957897637596937d71d>Spec+Agents+TDD over claude | gist</a></li></ul><hr><ul><li>claude.md: 写上项目概况、测试运行方式、代码风格指南、定制工作流程等。Claude 会自动读这个文件并加入 context，相当于给它一份“项目说明书”</li><li>及时加入版本记录，进行改动前先让 claude 生成任务清单，并按步骤检查是否符合设计并验证 (task -> plan -> action -> review)</li><li>通过触发词进入扩展思考模式(&ldquo;think&rdquo; &lt; &ldquo;think hard&rdquo; &lt; &ldquo;think harder&rdquo; &lt; &ldquo;ultrathink&rdquo; )</li><li>上下文管理: claude 的上下文窗口有 20 万 token，但长对话可能塞满。如果看到警告可以用 /clear 清空上下文，或者用 /compact 让 压缩后继续任务</li><li>拆分 agents 独立运行 TDD 驱动，职责分离<ul><li>Role qa 先根据任务编写测试用例，禁止模拟实现</li><li>Role dev 编写的代码必须通过测试，无权限修改用例</li></ul></li><li>安全模式: claude &ndash;dangerously-skip-permissions # 默认设置为读操作任意，写操作或跑命令需要确认</li><li>Git 交互： 搜索git历史记录，回答“v1.2.3的更改是什么？”; 生成 commit message; rebase\merge 解冲突等复杂操作</li><li>提供参考数据或者对应 api/spec 文档，按照规范进行开发工作<ul><li>/add-dirs @file 引用文件或者外部目录</li><li>复制图片或者日志给 claude 进行问题诊断或者 ui 实现</li><li>状态写入 ‘shared.md’ 提供共享内容给多个 agents 进行知识交换和协作，like mmap</li></ul></li><li>快速实验，及时调整，多任务并行<ul><li>git worktree add -b feat/api /tmp/project-api dev</li><li>claude -p ‘请求服务时，移除不需要的字段，例如 timestamp’ # headless mode</li></ul></li><li>重新开始的成功率通常比试图纠正 Claude 的错误要高，必要时为了简化直接打断它</li></ul><h2 id=how-to>How to</h2><p>See the claude.md in <a href=https://github.com/yanyaoer/dab.rs>https://github.com/yanyaoer/dab.rs</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span><span style=color:#75715e>## Projects document with claude.md
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>参考 cmus 的交互界面 ./resource/cmus-2.4.3-osx.png 和 ./resource/openapi.yaml 接口规范描述  
</span></span><span style=display:flex><span>编写一个 unix 风格的命令行音乐播放器
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### Tools for shell interactions 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Is it about finding FILES? use &#39;fd&#39; 
</span></span><span style=display:flex><span>Is it about finding TEXT/strings? use &#39;rg&#39; 
</span></span><span style=display:flex><span>Is it about finding CODE STRUCTURE? use &#39;ast-grep&#39;
</span></span><span style=display:flex><span>Is it about SELECTING from multiple results? pipe to &#39;fzf&#39; 
</span></span><span style=display:flex><span>Is it about interacting with JSON? use &#39;jq&#39; 
</span></span><span style=display:flex><span>Is it about interacting with YAML or XML? use &#39;yq&#39;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### debug &amp; dev
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>-</span> 按合理的日志分级输出调试信息和错误, 默认输出到 /tmp/dab_rs.log, 禁止 print 方式直接打印
</span></span><span style=display:flex><span><span style=color:#66d9ef>-</span> 为模块核心功能提供健壮的单元测试, 每次改动后进行同步验证确保播放引擎正确工作
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>-</span> 支持 dab search &#39;query&#39; 搜索歌曲
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>-</span> 支持 dab play/pause/next/prev 等命令操作播放服务
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>-</span> 支持 dab queue &#39;http://www.xiledradio.com/shows/XiledRadio-Show376.mp3&#39; 添加本地文件和在线文件到播放列表
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>-</span> 每次修改业务逻辑时保持 ./README.md 和 ./TUI_SHORTCUTS.md 内容的及时有效更新
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>-</span> 使用 asciiart 风格将各 view 的 UI 绘制在 README 顶部的标题下方
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>-</span> 开发过程中使用 rustfmt 格式化代码, 即 cargo fmt
</span></span></code></pre></div><p><strong>Interactive</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># create and publish release to github</span>
</span></span><span style=display:flex><span>&gt; 构建 osx 下 arm/amd64 的 release，并上传到 https://github.com/yanyaoer/dab.rs/releases 作为
</span></span><span style=display:flex><span>  nightly 发布
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>⏺ I<span style=color:#e6db74>&#39;ll help you build release binaries for OSX and Linux (both ARM and AMD64) and upload them to
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  GitHub releases as a nightly release.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>⏺ Bash(rustup target list --installed)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  ⎿  aarch64-apple-darwin
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     wasm32-unknown-unknown
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     x86_64-pc-windows-gnu
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>⏺ Bash(rustup target add x86_64-apple-darwin aarch64-unknown-linux-gnu x86_64-unknown-linux-gnu)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  ⎿  info: downloading component &#39;</span>rust-std<span style=color:#e6db74>&#39; for &#39;</span>x86_64-apple-darwin<span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     info: installing component &#39;</span>rust-std<span style=color:#e6db74>&#39; for &#39;</span>x86_64-apple-darwin<span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     info: downloading component &#39;</span>rust-std<span style=color:#e6db74>&#39; for &#39;</span>aarch64-unknown-linux-gnu<span style=color:#960050;background-color:#1e0010>&#39;</span>
</span></span><span style=display:flex><span>     … +3 lines <span style=color:#f92672>(</span>ctrl+r to expand<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     
</span></span><span style=display:flex><span>⏺ Perfect! 🎉
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  我已经成功完成了 macOS 平台的 release 构建并上传到 GitHub releases。以下是完成的内容：
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ✅ macOS 构建成功:
</span></span><span style=display:flex><span>  - Apple Silicon <span style=color:#f92672>(</span>ARM64<span style=color:#f92672>)</span>: dab-aarch64-apple-darwin <span style=color:#f92672>(</span>10.4MB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  - Intel <span style=color:#f92672>(</span>x86_64<span style=color:#f92672>)</span>: dab-x86_64-apple-darwin <span style=color:#f92672>(</span>10.1MB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ✅ GitHub Release 发布成功:
</span></span><span style=display:flex><span>  - 发布地址: https://github.com/yanyaoer/dab.rs/releases/tag/nightly-20250802
</span></span><span style=display:flex><span>  - 标记为 prerelease <span style=color:#f92672>(</span>nightly 构建<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  - 包含两个 macOS 二进制文件
</span></span></code></pre></div><p><strong>In Production</strong>
Cloudflare 的项目 oauth-provider 完全和 claude 结对编程生成</p><ul><li>Individual Contributor => v-Team Leader，指令要清晰+充分的背景信息，提升信任度</li><li>区分任务优先级：异步处理（外围功能、原型设计）；同步监督（核心业务逻辑、关键修复）</li></ul><blockquote><p>未来的一个趋势：程序员可以转为“架构师+指挥家” 与 AI 协作
<a href="https://github.com/cloudflare/workers-oauth-provider/commits/main/?after=fe8dbd46fb8e8e25fc1bef7ea0114aa7e402617d+104">https://github.com/cloudflare/workers-oauth-provider/commits/main/?after=fe8dbd46fb8e8e25fc1bef7ea0114aa7e402617d+104</a></p></blockquote><p><strong>All rule about Consistency</strong>
约束控制 LLM 的行为，减少幻觉和偷懒，输出符合预期的结果
“大模型不是许愿池，需求方的参与决定产出质量”</p><h2 id=resources>Resources</h2><ul><li>Cli: claude-code, gemini-cli/qwen-cli, open-code/crush&mldr;</li><li>IDE: cursor, augments, kiro, trae&mldr;</li><li>Plugin: avante.vim, cline, roo&mldr;</li><li>Provider: anyrouter, openrouter, cerebras, augment2api, claude-relay-service, claude-code-proxy&mldr;</li><li>Model: opus/sonnet 4 > glm4.5 > kimi-k2 > qwen3-235b(no-think) > qwen3-coder-480b&mldr;</li><li><a href=https://jules.google.com>https://jules.google.com</a></li><li><a href=https://github.com/harperreed/dotfiles/blob/master/.claude/CLAUDE.md>https://github.com/harperreed/dotfiles/blob/master/.claude/CLAUDE.md</a></li><li><a href=https://github.com/obra/dotfiles/blob/main/.claude/CLAUDE.md>https://github.com/obra/dotfiles/blob/main/.claude/CLAUDE.md</a></li></ul></main><footer><p>Copyright 2025. All rights reserved.</p></footer></body></html>